<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Summery of SQL Basic | boranの小さな巣</title><meta name="keywords" content="thinks"><meta name="author" content="chen-boran"><meta name="copyright" content="chen-boran"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="some of my thinks">
<meta property="og:type" content="article">
<meta property="og:title" content="Summery of SQL Basic">
<meta property="og:url" content="http://example.com/2021/04/28/Summery-of-SQL-Basic/index.html">
<meta property="og:site_name" content="boranの小さな巣">
<meta property="og:description" content="some of my thinks">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.hualigs.cn/image/60892a8f64b7f.jpg">
<meta property="article:published_time" content="2021-04-28T09:05:48.000Z">
<meta property="article:modified_time" content="2021-04-28T09:34:59.119Z">
<meta property="article:author" content="chen-boran">
<meta property="article:tag" content="thinks">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.hualigs.cn/image/60892a8f64b7f.jpg"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="http://example.com/2021/04/28/Summery-of-SQL-Basic/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-04-28 17:34:59'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="boranの小さな巣" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/favicon.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">6</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> link</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-book"></i><span> books</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> about</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-list"></i><span> comments</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://www.hualigs.cn/image/60892a8f64b7f.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">boranの小さな巣</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> link</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-book"></i><span> books</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> about</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-list"></i><span> comments</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Summery of SQL Basic</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-04-28T09:05:48.000Z" title="Created 2021-04-28 17:05:48">2021-04-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-04-28T09:34:59.119Z" title="Updated 2021-04-28 17:34:59">2021-04-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/thinks/">thinks</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Summery of SQL Basic"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="1：基础查询"><a href="#1：基础查询" class="headerlink" title="1：基础查询"></a>1：基础查询</h3><p>语法：<br>select 查询列表 from 表名;</p>
<p>类似于：System.out.println(打印东西);</p>
<p>特点：</p>
<p>1、查询列表可以是：表中的字段、常量值、表达式、函数<br>2、查询的结果是一个虚拟的表格</p>
<p>USE myemployees;</p>
<h5 id="1-查询表中的单个字段"><a href="#1-查询表中的单个字段" class="headerlink" title="1.查询表中的单个字段"></a>1.查询表中的单个字段</h5><p>​                SELECT last_name FROM employees;</p>
<h5 id="2-查询表中的多个字段"><a href="#2-查询表中的多个字段" class="headerlink" title="2.查询表中的多个字段"></a>2.查询表中的多个字段</h5><p>​                SELECT last_name,salary,email FROM employees;</p>
<h5 id="3-查询表中的所有字段"><a href="#3-查询表中的所有字段" class="headerlink" title="3.查询表中的所有字段"></a>3.查询表中的所有字段</h5><h6 id="方式一："><a href="#方式一：" class="headerlink" title="方式一："></a>方式一：</h6><p>SELECT<br>    <code>employee_id</code>,<br>    <code>first_name</code>,<br>    <code>last_name</code>,<br>    <code>phone_number</code>,<br>    <code>last_name</code>,<br>    <code>job_id</code>,<br>    <code>phone_number</code>,<br>    <code>job_id</code>,<br>    <code>salary</code>,<br>    <code>commission_pct</code>,<br>    <code>manager_id</code>,<br>    <code>department_id</code>,<br>    <code>hiredate</code><br>FROM<br>    employees ;</p>
<h6 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a>方式二：</h6><p> SELECT * FROM employees;</p>
<h5 id="4-查询常量值"><a href="#4-查询常量值" class="headerlink" title="4.查询常量值"></a>4.查询常量值</h5><p> SELECT 100;<br> SELECT ‘john’;</p>
<h5 id="5-查询表达式"><a href="#5-查询表达式" class="headerlink" title="5.查询表达式"></a>5.查询表达式</h5><p> SELECT 100%98;</p>
<h5 id="6-查询函数"><a href="#6-查询函数" class="headerlink" title="6.查询函数"></a>6.查询函数</h5><p> SELECT VERSION();</p>
<h5 id="7-起别名"><a href="#7-起别名" class="headerlink" title="7.起别名"></a>7.起别名</h5><p> ①便于理解<br> ②如果要查询的字段有重名的情况，使用别名可以区分开来</p>
<h6 id="方式一：使用as"><a href="#方式一：使用as" class="headerlink" title="方式一：使用as"></a>方式一：使用as</h6><p>SELECT 100%98 AS 结果;<br>SELECT last_name AS 姓,first_name AS 名 FROM employees;</p>
<h6 id="方式二：使用空格"><a href="#方式二：使用空格" class="headerlink" title="方式二：使用空格"></a>方式二：使用空格</h6><p>SELECT last_name 姓,first_name 名 FROM employees;</p>
<h6 id="案例：查询salary，显示结果为-out-put"><a href="#案例：查询salary，显示结果为-out-put" class="headerlink" title="案例：查询salary，显示结果为 out put"></a>案例：查询salary，显示结果为 out put</h6><p>SELECT salary AS “out put” FROM employees;</p>
<h5 id="8-去重"><a href="#8-去重" class="headerlink" title="8.去重"></a>8.去重</h5><h6 id="案例：查询员工表中涉及到的所有的部门编号"><a href="#案例：查询员工表中涉及到的所有的部门编号" class="headerlink" title="案例：查询员工表中涉及到的所有的部门编号"></a>案例：查询员工表中涉及到的所有的部门编号</h6><p>SELECT DISTINCT department_id FROM employees;</p>
<h5 id="9-号的作用"><a href="#9-号的作用" class="headerlink" title="9.+号的作用"></a>9.+号的作用</h5><p> java中的+号：<br>①运算符，两个操作数都为数值型<br>②连接符，只要有一个操作数为字符串</p>
<p>mysql中的+号：<br>仅仅只有一个功能：运算符</p>
<p>select 100+90; 两个操作数都为数值型，则做加法运算<br>select ‘123’+90;只要其中一方为字符型，试图将字符型数值转换成数值型<br>            如果转换成功，则继续做加法运算<br>select ‘john’+90;    如果转换失败，则将字符型数值转换成0</p>
<p>select null+10; 只要其中一方为null，则结果肯定为null</p>
<h5 id="案例：查询员工名和姓连接成一个字段，并显示为-姓名"><a href="#案例：查询员工名和姓连接成一个字段，并显示为-姓名" class="headerlink" title="案例：查询员工名和姓连接成一个字段，并显示为 姓名"></a>案例：查询员工名和姓连接成一个字段，并显示为 姓名</h5><p>SELECT CONCAT(‘a’,’b’,’c’) AS 结果;</p>
<p>SELECT<br>    CONCAT(last_name,first_name) AS 姓名<br>FROM<br>    employees;</p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>​    </p>
<pre><code>  1.    下面的语句是否可以执行成功  
</code></pre>
<p>SELECT last_name , job_id , salary AS sal<br>FROM employees; </p>
<h5 id="2-下面的语句是否可以执行成功"><a href="#2-下面的语句是否可以执行成功" class="headerlink" title="2.下面的语句是否可以执行成功"></a>2.下面的语句是否可以执行成功</h5><p>SELECT  *  FROM employees; </p>
<h5 id="3-找出下面语句中的错误"><a href="#3-找出下面语句中的错误" class="headerlink" title="3.找出下面语句中的错误"></a>3.找出下面语句中的错误</h5><p>SELECT employee_id , last_name,<br>salary * 12 AS “ANNUAL  SALARY”<br>FROM employees;</p>
<h5 id="4-显示表departments的结构，并查询其中的全部数据"><a href="#4-显示表departments的结构，并查询其中的全部数据" class="headerlink" title="4.显示表departments的结构，并查询其中的全部数据"></a>4.显示表departments的结构，并查询其中的全部数据</h5><p>DESC departments;<br>SELECT * FROM <code>departments</code>;</p>
<h5 id="5-显示出表employees中的全部job-id（不能重复）"><a href="#5-显示出表employees中的全部job-id（不能重复）" class="headerlink" title="5.显示出表employees中的全部job_id（不能重复）"></a>5.显示出表employees中的全部job_id（不能重复）</h5><p>SELECT DISTINCT job_id FROM employees;</p>
<h5 id="6-显示出表employees的全部列，各个列之间用逗号连接，列头显示成OUT-PUT"><a href="#6-显示出表employees的全部列，各个列之间用逗号连接，列头显示成OUT-PUT" class="headerlink" title="6.显示出表employees的全部列，各个列之间用逗号连接，列头显示成OUT_PUT"></a>6.显示出表employees的全部列，各个列之间用逗号连接，列头显示成OUT_PUT</h5><p>SELECT<br>    IFNULL(commission_pct,0) AS 奖金率,<br>    commission_pct<br>FROM<br>    employees;</p>
<p>#——————————————-</p>
<p>SELECT<br>    CONCAT(<code>first_name</code>,’,’,<code>last_name</code>,’,’,<code>job_id</code>,’,’,IFNULL(commission_pct,0)) AS out_put<br>FROM<br>    employees;</p>
<h3 id="2：条件查询"><a href="#2：条件查询" class="headerlink" title="2：条件查询"></a>2：条件查询</h3><p>语法：<br>    select<br>        查询列表<br>    from<br>        表名<br>    where<br>        筛选条件;</p>
<p>分类：<br>    一、按条件表达式筛选</p>
<pre><code>简单条件运算符：&gt; &lt; = != &lt;&gt; &gt;= &lt;=

二、按逻辑表达式筛选
逻辑运算符：
作用：用于连接条件表达式
    &amp;&amp; || !
    and or not
    
&amp;&amp;和and：两个条件都为true，结果为true，反之为false
||或or： 只要有一个条件为true，结果为true，反之为false
!或not： 如果连接的条件本身为false，结果为true，反之为false

三、模糊查询
    like
    between and
    in
    is null
</code></pre>
<h4 id="一、按条件表达式筛选"><a href="#一、按条件表达式筛选" class="headerlink" title="一、按条件表达式筛选"></a>一、按条件表达式筛选</h4><h6 id="案例1：查询工资-gt-12000的员工信息"><a href="#案例1：查询工资-gt-12000的员工信息" class="headerlink" title="案例1：查询工资&gt;12000的员工信息"></a>案例1：查询工资&gt;12000的员工信息</h6><p>SELECT<br>    *<br>FROM<br>    employees<br>WHERE<br>    salary&gt;12000;</p>
<h6 id="案例2：查询部门编号不等于90号的员工名和部门编号"><a href="#案例2：查询部门编号不等于90号的员工名和部门编号" class="headerlink" title="案例2：查询部门编号不等于90号的员工名和部门编号"></a>案例2：查询部门编号不等于90号的员工名和部门编号</h6><p>SELECT<br>    last_name,<br>    department_id<br>FROM<br>    employees<br>WHERE<br>    department_id&lt;&gt;90;</p>
<h4 id="二、按逻辑表达式筛选"><a href="#二、按逻辑表达式筛选" class="headerlink" title="二、按逻辑表达式筛选"></a>二、按逻辑表达式筛选</h4><p>#案例1：查询工资z在10000到20000之间的员工名、工资以及奖金<br>SELECT<br>    last_name,<br>    salary,<br>    commission_pct<br>FROM<br>    employees<br>WHERE<br>    salary&gt;=10000 AND salary&lt;=20000;<br>#案例2：查询部门编号不是在90到110之间，或者工资高于15000的员工信息<br>SELECT<br>    *<br>FROM<br>    employees<br>WHERE<br>    NOT(department_id&gt;=90 AND  department_id&lt;=110) OR salary&gt;15000;</p>
<h4 id="三、模糊查询"><a href="#三、模糊查询" class="headerlink" title="三、模糊查询"></a>三、模糊查询</h4><p>like<br>between and<br>in<br>is null|is not null</p>
<h4 id="1-like"><a href="#1-like" class="headerlink" title="1.like"></a>1.like</h4><p>特点：<br>①一般和通配符搭配使用<br>    通配符：<br>    % 任意多个字符,包含0个字符<br>    _ 任意单个字符<br>*、</p>
<h5 id="案例1：查询员工名中包含字符a的员工信息"><a href="#案例1：查询员工名中包含字符a的员工信息" class="headerlink" title="案例1：查询员工名中包含字符a的员工信息"></a>案例1：查询员工名中包含字符a的员工信息</h5><p>select<br>    *<br>from<br>    employees<br>where<br>    last_name like ‘%a%’;#abc</p>
<h5 id="案例2：查询员工名中第三个字符为e，第五个字符为a的员工名和工资"><a href="#案例2：查询员工名中第三个字符为e，第五个字符为a的员工名和工资" class="headerlink" title="案例2：查询员工名中第三个字符为e，第五个字符为a的员工名和工资"></a>案例2：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</h5><p>select<br>    last_name,<br>    salary<br>FROM<br>    employees<br>WHERE<br>    last_name LIKE ‘__n_l%’;</p>
<h5 id="案例3：查询员工名中第二个字符为-的员工名"><a href="#案例3：查询员工名中第二个字符为-的员工名" class="headerlink" title="案例3：查询员工名中第二个字符为_的员工名"></a>案例3：查询员工名中第二个字符为_的员工名</h5><p>SELECT<br>    last_name<br>FROM<br>    employees<br>WHERE<br>    last_name LIKE ‘<em>$</em>%’ ESCAPE ‘$’;</p>
<h4 id="2-between-and"><a href="#2-between-and" class="headerlink" title="2.between and"></a>2.between and</h4><p>①使用between and 可以提高语句的简洁度<br>②包含临界值<br>③两个临界值不要调换顺序</p>
<h5 id="案例1：查询员工编号在100到120之间的员工信息"><a href="#案例1：查询员工编号在100到120之间的员工信息" class="headerlink" title="案例1：查询员工编号在100到120之间的员工信息"></a>案例1：查询员工编号在100到120之间的员工信息</h5><p>SELECT<br>    *<br>FROM<br>    employees<br>WHERE<br>    employee_id &gt;= 120 AND employee_id&lt;=100;<br>#———————-<br>SELECT<br>    *<br>FROM<br>    employees<br>WHERE<br>    employee_id BETWEEN 120 AND 100;</p>
<h4 id="3-in"><a href="#3-in" class="headerlink" title="3.in"></a>3.in</h4><p>含义：判断某字段的值是否属于in列表中的某一项<br>特点：<br>    ①使用in提高语句简洁度<br>    ②in列表的值类型必须一致或兼容<br>    ③in列表中不支持通配符</p>
<h5 id="案例：查询员工的工种编号是-IT-PROG、AD-VP、AD-PRES中的一个员工名和工种编号"><a href="#案例：查询员工的工种编号是-IT-PROG、AD-VP、AD-PRES中的一个员工名和工种编号" class="headerlink" title="案例：查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号"></a>案例：查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号</h5><p>SELECT<br>    last_name,<br>    job_id<br>FROM<br>    employees<br>WHERE<br>    job_id = ‘IT_PROT’ OR job_id = ‘AD_VP’ OR JOB_ID =’AD_PRES’;</p>
<p>#——————</p>
<p>SELECT<br>    last_name,<br>    job_id<br>FROM<br>    employees<br>WHERE<br>    job_id IN( ‘IT_PROT’ ,’AD_VP’,’AD_PRES’);</p>
<h4 id="4、is-null"><a href="#4、is-null" class="headerlink" title="4、is null"></a>4、is null</h4><p>=或&lt;&gt;不能用于判断null值<br>is null或is not null 可以判断null值</p>
<h5 id="案例1：查询没有奖金的员工名和奖金率"><a href="#案例1：查询没有奖金的员工名和奖金率" class="headerlink" title="案例1：查询没有奖金的员工名和奖金率"></a>案例1：查询没有奖金的员工名和奖金率</h5><p>SELECT<br>    last_name,<br>    commission_pct<br>FROM<br>    employees<br>WHERE<br>    commission_pct IS NULL;</p>
<h5 id="案例1：查询有奖金的员工名和奖金率"><a href="#案例1：查询有奖金的员工名和奖金率" class="headerlink" title="案例1：查询有奖金的员工名和奖金率"></a>案例1：查询有奖金的员工名和奖金率</h5><p>SELECT<br>    last_name,<br>    commission_pct<br>FROM<br>    employees<br>WHERE<br>    commission_pct IS NOT NULL;</p>
<p>#———-以下为×<br>SELECT<br>    last_name,<br>    commission_pct<br>FROM<br>    employees</p>
<p>WHERE<br>    salary IS 12000;</p>
<h4 id="安全等于-lt-gt"><a href="#安全等于-lt-gt" class="headerlink" title="安全等于  &lt;=&gt;"></a>安全等于  &lt;=&gt;</h4><h5 id="案例1：查询没有奖金的员工名和奖金率-1"><a href="#案例1：查询没有奖金的员工名和奖金率-1" class="headerlink" title="案例1：查询没有奖金的员工名和奖金率"></a>案例1：查询没有奖金的员工名和奖金率</h5><p>SELECT<br>    last_name,<br>    commission_pct<br>FROM<br>    employees<br>WHERE<br>    commission_pct &lt;=&gt;NULL;</p>
<h5 id="案例2：查询工资为12000的员工信息"><a href="#案例2：查询工资为12000的员工信息" class="headerlink" title="案例2：查询工资为12000的员工信息"></a>案例2：查询工资为12000的员工信息</h5><p>SELECT<br>    last_name,<br>    salary<br>FROM<br>    employees</p>
<p>WHERE<br>    salary &lt;=&gt; 12000;</p>
<p>#is null pk &lt;=&gt;</p>
<p>IS NULL:仅仅可以判断NULL值，可读性较高，建议使用<br>&lt;=&gt;    :既可以判断NULL值，又可以判断普通的数值，可读性较低</p>
<h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><h5 id="1-显示系统时间-注：日期-时间"><a href="#1-显示系统时间-注：日期-时间" class="headerlink" title="1.显示系统时间(注：日期+时间)"></a>1.显示系统时间(注：日期+时间)</h5><p>SELECT NOW();</p>
<h5 id="2-查询员工号，姓名，工资，以及工资提高百分之20-后的结果（new-salary）"><a href="#2-查询员工号，姓名，工资，以及工资提高百分之20-后的结果（new-salary）" class="headerlink" title="2.    查询员工号，姓名，工资，以及工资提高百分之20%后的结果（new salary）"></a>2.    查询员工号，姓名，工资，以及工资提高百分之20%后的结果（new salary）</h5><p>SELECT employee_id,last_name,salary,salary*1.2 “new salary”<br>FROM employees;</p>
<h5 id="3-将员工的姓名按首字母排序，并写出姓名的长度（length）"><a href="#3-将员工的姓名按首字母排序，并写出姓名的长度（length）" class="headerlink" title="3.    将员工的姓名按首字母排序，并写出姓名的长度（length）"></a>3.    将员工的姓名按首字母排序，并写出姓名的长度（length）</h5><p>SELECT LENGTH(last_name) 长度,SUBSTR(last_name,1,1) 首字符,last_name<br>FROM employees<br>ORDER BY 首字符;</p>
<h5 id="4-做一个查询，产生下面的结果"><a href="#4-做一个查询，产生下面的结果" class="headerlink" title="4.    做一个查询，产生下面的结果"></a>4.    做一个查询，产生下面的结果</h5><p><last_name> earns <salary> monthly but wants &lt;salary*3&gt;<br>Dream Salary<br>King earns 24000 monthly but wants 72000</p>
<p>SELECT CONCAT(last_name,’ earns ‘,salary,’ monthly but wants ‘,salary*3) AS “Dream Salary”<br>FROM employees<br>WHERE salary=24000;</p>
<h5 id="5-使用case-when，按照下面的条件："><a href="#5-使用case-when，按照下面的条件：" class="headerlink" title="5.    使用case-when，按照下面的条件："></a>5.    使用case-when，按照下面的条件：</h5><p>job                  grade<br>AD_PRES            A<br>ST_MAN             B<br>IT_PROG             C<br>SA_REP              D<br>ST_CLERK           E<br>产生下面的结果<br>Last_name    Job_id    Grade<br>king    AD_PRES    A</p>
<p>SELECT last_name,job_id AS  job,<br>CASE job_id<br>WHEN ‘AD_PRES’ THEN ‘A’<br>WHEN ‘ST_MAN’ THEN ‘B’<br>WHEN ‘IT_PROG’ THEN ‘C’<br>WHEN ‘SA_PRE’ THEN ‘D’<br>WHEN ‘ST_CLERK’ THEN ‘E’<br>END AS Grade<br>FROM employees<br>WHERE job_id = ‘AD_PRES’;</p>
<h3 id="3排序查询"><a href="#3排序查询" class="headerlink" title="3排序查询"></a>3排序查询</h3><h4 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h4><p>select 查询列表<br>from 表名<br>【where  筛选条件】<br>order by 排序的字段或表达式;</p>
<h4 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h4><p>1、asc代表的是升序，可以省略<br>desc代表的是降序</p>
<p>2、order by子句可以支持 单个字段、别名、表达式、函数、多个字段</p>
<p>3、order by子句在查询语句的最后面，除了limit子句</p>
<h5 id="1、按单个字段排序"><a href="#1、按单个字段排序" class="headerlink" title="1、按单个字段排序"></a>1、按单个字段排序</h5><p>SELECT * FROM employees ORDER BY salary DESC;</p>
<h5 id="2、添加筛选条件再排序"><a href="#2、添加筛选条件再排序" class="headerlink" title="2、添加筛选条件再排序"></a>2、添加筛选条件再排序</h5><h6 id="案例：查询部门编号-gt-90的员工信息，并按员工编号降序"><a href="#案例：查询部门编号-gt-90的员工信息，并按员工编号降序" class="headerlink" title="案例：查询部门编号&gt;=90的员工信息，并按员工编号降序"></a>案例：查询部门编号&gt;=90的员工信息，并按员工编号降序</h6><p>SELECT *<br>FROM employees<br>WHERE department_id&gt;=90<br>ORDER BY employee_id DESC;</p>
<h5 id="3、按表达式排序"><a href="#3、按表达式排序" class="headerlink" title="3、按表达式排序"></a>3、按表达式排序</h5><h6 id="案例：查询员工信息-按年薪降序"><a href="#案例：查询员工信息-按年薪降序" class="headerlink" title="案例：查询员工信息 按年薪降序"></a>案例：查询员工信息 按年薪降序</h6><p>SELECT <em>,salary</em>12*(1+IFNULL(commission_pct,0))<br>FROM employees<br>ORDER BY salary<em>12</em>(1+IFNULL(commission_pct,0)) DESC;</p>
<h5 id="4、按别名排序"><a href="#4、按别名排序" class="headerlink" title="4、按别名排序"></a>4、按别名排序</h5><h6 id="案例：查询员工信息-按年薪升序"><a href="#案例：查询员工信息-按年薪升序" class="headerlink" title="案例：查询员工信息 按年薪升序"></a>案例：查询员工信息 按年薪升序</h6><p>SELECT <em>,salary</em>12*(1+IFNULL(commission_pct,0)) 年薪<br>FROM employees<br>ORDER BY 年薪 ASC;</p>
<h5 id="5、按函数排序"><a href="#5、按函数排序" class="headerlink" title="5、按函数排序"></a>5、按函数排序</h5><h6 id="案例：查询员工名，并且按名字的长度降序"><a href="#案例：查询员工名，并且按名字的长度降序" class="headerlink" title="案例：查询员工名，并且按名字的长度降序"></a>案例：查询员工名，并且按名字的长度降序</h6><p>SELECT LENGTH(last_name),last_name<br>FROM employees<br>ORDER BY LENGTH(last_name) DESC;</p>
<h5 id="6、按多个字段排序"><a href="#6、按多个字段排序" class="headerlink" title="6、按多个字段排序"></a>6、按多个字段排序</h5><h6 id="案例：查询员工信息，要求先按工资降序，再按employee-id升序"><a href="#案例：查询员工信息，要求先按工资降序，再按employee-id升序" class="headerlink" title="案例：查询员工信息，要求先按工资降序，再按employee_id升序"></a>案例：查询员工信息，要求先按工资降序，再按employee_id升序</h6><p>SELECT *<br>FROM employees<br>ORDER BY salary DESC,employee_id ASC;</p>
<h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h4><h6 id="1-查询员工的姓名和部门号和年薪，按年薪降序-按姓名升序"><a href="#1-查询员工的姓名和部门号和年薪，按年薪降序-按姓名升序" class="headerlink" title="1.查询员工的姓名和部门号和年薪，按年薪降序 按姓名升序"></a>1.查询员工的姓名和部门号和年薪，按年薪降序 按姓名升序</h6><p>SELECT last_name,department_id,salary<em>12</em>(1+IFNULL(commission_pct,0)) 年薪<br>FROM employees<br>ORDER BY 年薪 DESC,last_name ASC;</p>
<h6 id="2-选择工资不在8000到17000的员工的姓名和工资，按工资降序"><a href="#2-选择工资不在8000到17000的员工的姓名和工资，按工资降序" class="headerlink" title="2.选择工资不在8000到17000的员工的姓名和工资，按工资降序"></a>2.选择工资不在8000到17000的员工的姓名和工资，按工资降序</h6><p>SELECT last_name,salary<br>FROM employees</p>
<p>WHERE salary NOT BETWEEN 8000 AND 17000<br>ORDER BY salary DESC;</p>
<h6 id="3-查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序"><a href="#3-查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序" class="headerlink" title="3.查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序"></a>3.查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序</h6><p>SELECT *,LENGTH(email)<br>FROM employees<br>WHERE email LIKE ‘%e%’<br>ORDER BY LENGTH(email) DESC,department_id ASC;</p>
<h3 id="4：常见函数"><a href="#4：常见函数" class="headerlink" title="4：常见函数"></a>4：常见函数</h3><h4 id="概念：类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名"><a href="#概念：类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名" class="headerlink" title="概念：类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名"></a>概念：类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名</h4><p>好处：1、隐藏了实现细节  2、提高代码的重用性<br> 调用：select 函数名(实参列表) 【from 表】;<br> 特点：<br>    ①叫什么（函数名）<br>    ②干什么（函数功能）</p>
<p>分类：<br>    1、单行函数<br>    如 concat、length、ifnull等<br>    2、分组函数</p>
<pre><code>功能：做统计使用，又称为统计函数、聚合函数、组函数
</code></pre>
<h4 id="常见函数："><a href="#常见函数：" class="headerlink" title="常见函数："></a>常见函数：</h4><p>​    一、单行函数<br>​    字符函数：<br>​    length:获取字节个数(utf-8一个汉字代表3个字节,gbk为2个字节)<br>​    concat<br>​    substr<br>​    instr<br>​    trim<br>​    upper<br>​    lower<br>​    lpad<br>​    rpad<br>​    replace<br>​    </p>
<pre><code>数学函数：
round
ceil
floor
truncate
mod

日期函数：
now
curdate
curtime
year
month
monthname
day
hour
minute
second
str_to_date
date_format
其他函数：
version
database
user
控制函数
if
case
</code></pre>
<p>​    </p>
<h4 id="一、字符函数"><a href="#一、字符函数" class="headerlink" title="一、字符函数"></a>一、字符函数</h4><p>#1.length 获取参数值的字节个数<br>SELECT LENGTH(‘john’);<br>SELECT LENGTH(‘张三丰hahaha’);</p>
<p>SHOW VARIABLES LIKE ‘%char%’</p>
<h4 id="2-concat-拼接字符串"><a href="#2-concat-拼接字符串" class="headerlink" title="2.concat 拼接字符串"></a>2.concat 拼接字符串</h4><p>SELECT CONCAT(last_name,’_’,first_name) 姓名 FROM employees;</p>
<h4 id="3-upper、lower"><a href="#3-upper、lower" class="headerlink" title="3.upper、lower"></a>3.upper、lower</h4><p>SELECT UPPER(‘john’);<br>SELECT LOWER(‘joHn’);</p>
<h5 id="示例：将姓变大写，名变小写，然后拼接"><a href="#示例：将姓变大写，名变小写，然后拼接" class="headerlink" title="示例：将姓变大写，名变小写，然后拼接"></a>示例：将姓变大写，名变小写，然后拼接</h5><p>SELECT CONCAT(UPPER(last_name),LOWER(first_name))  姓名 FROM employees;</p>
<h4 id="4-substr、substring"><a href="#4-substr、substring" class="headerlink" title="4.substr、substring"></a>4.substr、substring</h4><p>注意：索引从1开始</p>
<h5 id="截取从指定索引处后面所有字符"><a href="#截取从指定索引处后面所有字符" class="headerlink" title="截取从指定索引处后面所有字符"></a>截取从指定索引处后面所有字符</h5><p>SELECT SUBSTR(‘李莫愁爱上了陆展元’,7)  out_put;</p>
<h5 id="截取从指定索引处指定字符长度的字符"><a href="#截取从指定索引处指定字符长度的字符" class="headerlink" title="截取从指定索引处指定字符长度的字符"></a>截取从指定索引处指定字符长度的字符</h5><p>SELECT SUBSTR(‘李莫愁爱上了陆展元’,1,3) out_put;</p>
<h6 id="案例：姓名中首字符大写，其他字符小写然后用-拼接，显示出来"><a href="#案例：姓名中首字符大写，其他字符小写然后用-拼接，显示出来" class="headerlink" title="案例：姓名中首字符大写，其他字符小写然后用_拼接，显示出来"></a>案例：姓名中首字符大写，其他字符小写然后用_拼接，显示出来</h6><p>SELECT CONCAT(UPPER(SUBSTR(last_name,1,1)),’_’,LOWER(SUBSTR(last_name,2)))  out_put<br>FROM employees;</p>
<h4 id="5-instr-返回子串第一次出现的索引，如果找不到返回0"><a href="#5-instr-返回子串第一次出现的索引，如果找不到返回0" class="headerlink" title="5.instr 返回子串第一次出现的索引，如果找不到返回0"></a>5.instr 返回子串第一次出现的索引，如果找不到返回0</h4><p>SELECT INSTR(‘杨不殷六侠悔爱上了殷六侠’,’殷八侠’) AS out_put;</p>
<h4 id="6-trim"><a href="#6-trim" class="headerlink" title="6.trim"></a>6.trim</h4><p>SELECT LENGTH(TRIM(‘    张翠山    ‘)) AS out_put;</p>
<p>SELECT TRIM(‘aa’ FROM ‘aaaaaaaaa张aaaaaaaaaaaa翠山aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa’)  AS out_put;</p>
<h4 id="7-lpad-用指定的字符实现左填充指定长度"><a href="#7-lpad-用指定的字符实现左填充指定长度" class="headerlink" title="7.lpad 用指定的字符实现左填充指定长度"></a>7.lpad 用指定的字符实现左填充指定长度</h4><p>SELECT LPAD(‘殷素素’,2,’*’) AS out_put;</p>
<h4 id="8-rpad-用指定的字符实现右填充指定长度"><a href="#8-rpad-用指定的字符实现右填充指定长度" class="headerlink" title="8.rpad 用指定的字符实现右填充指定长度"></a>8.rpad 用指定的字符实现右填充指定长度</h4><p>SELECT RPAD(‘殷素素’,12,’ab’) AS out_put;</p>
<h4 id="9-replace-替换"><a href="#9-replace-替换" class="headerlink" title="9.replace 替换"></a>9.replace 替换</h4><p>SELECT REPLACE(‘周芷若周芷若周芷若周芷若张无忌爱上了周芷若’,’周芷若’,’赵敏’) AS out_put;</p>
<h4 id="二、数学函数"><a href="#二、数学函数" class="headerlink" title="二、数学函数"></a>二、数学函数</h4><h5 id="round-四舍五入"><a href="#round-四舍五入" class="headerlink" title="round 四舍五入"></a>round 四舍五入</h5><p>SELECT ROUND(-1.55);<br>SELECT ROUND(1.567,2);</p>
<h5 id="ceil-向上取整-返回-gt-该参数的最小整数"><a href="#ceil-向上取整-返回-gt-该参数的最小整数" class="headerlink" title="ceil 向上取整,返回&gt;=该参数的最小整数"></a>ceil 向上取整,返回&gt;=该参数的最小整数</h5><p>SELECT CEIL(-1.02);</p>
<h5 id="floor-向下取整，返回-lt-该参数的最大整数"><a href="#floor-向下取整，返回-lt-该参数的最大整数" class="headerlink" title="floor 向下取整，返回&lt;=该参数的最大整数"></a>floor 向下取整，返回&lt;=该参数的最大整数</h5><p>SELECT FLOOR(-9.99);</p>
<h5 id="truncate-截断"><a href="#truncate-截断" class="headerlink" title="truncate 截断"></a>truncate 截断</h5><p>SELECT TRUNCATE(1.69999,1);</p>
<h5 id="mod取余"><a href="#mod取余" class="headerlink" title="mod取余"></a>mod取余</h5><p>mod(a,b) ：  a-a/b*b</p>
<p>mod(-10,-3):-10- (-10)/(-3)*（-3）=-1</p>
<p>SELECT MOD(10,-3);<br>SELECT 10%3;</p>
<h4 id="三、日期函数"><a href="#三、日期函数" class="headerlink" title="三、日期函数"></a>三、日期函数</h4><h5 id="now-返回当前系统日期-时间"><a href="#now-返回当前系统日期-时间" class="headerlink" title="now 返回当前系统日期+时间"></a>now 返回当前系统日期+时间</h5><p>SELECT NOW();</p>
<h5 id="curdate-返回当前系统日期，不包含时间"><a href="#curdate-返回当前系统日期，不包含时间" class="headerlink" title="curdate 返回当前系统日期，不包含时间"></a>curdate 返回当前系统日期，不包含时间</h5><p>SELECT CURDATE();</p>
<h5 id="curtime-返回当前时间，不包含日期"><a href="#curtime-返回当前时间，不包含日期" class="headerlink" title="curtime 返回当前时间，不包含日期"></a>curtime 返回当前时间，不包含日期</h5><p>SELECT CURTIME();</p>
<h5 id="可以获取指定的部分，年、月、日、小时、分钟、秒"><a href="#可以获取指定的部分，年、月、日、小时、分钟、秒" class="headerlink" title="可以获取指定的部分，年、月、日、小时、分钟、秒"></a>可以获取指定的部分，年、月、日、小时、分钟、秒</h5><p>SELECT YEAR(NOW()) 年;<br>SELECT YEAR(‘1998-1-1’) 年;</p>
<p>SELECT  YEAR(hiredate) 年 FROM employees;</p>
<p>SELECT MONTH(NOW()) 月;<br>SELECT MONTHNAME(NOW()) 月;</p>
<h5 id="str-to-date-将字符通过指定的格式转换成日期"><a href="#str-to-date-将字符通过指定的格式转换成日期" class="headerlink" title="str_to_date 将字符通过指定的格式转换成日期"></a>str_to_date 将字符通过指定的格式转换成日期</h5><p>SELECT STR_TO_DATE(‘1998-3-2’,’%Y-%c-%d’) AS out_put;</p>
<h5 id="查询入职日期为1992–4-3的员工信息"><a href="#查询入职日期为1992–4-3的员工信息" class="headerlink" title="查询入职日期为1992–4-3的员工信息"></a>查询入职日期为1992–4-3的员工信息</h5><p>SELECT * FROM employees WHERE hiredate = ‘1992-4-3’;</p>
<p>SELECT * FROM employees WHERE hiredate = STR_TO_DATE(‘4-3 1992’,’%c-%d %Y’);</p>
<h5 id="date-format-将日期转换成字符"><a href="#date-format-将日期转换成字符" class="headerlink" title="date_format 将日期转换成字符"></a>date_format 将日期转换成字符</h5><p>SELECT DATE_FORMAT(NOW(),’%y年%m月%d日’) AS out_put;</p>
<h5 id="查询有奖金的员工名和入职日期-xx月-xx日-xx年"><a href="#查询有奖金的员工名和入职日期-xx月-xx日-xx年" class="headerlink" title="查询有奖金的员工名和入职日期(xx月/xx日 xx年)"></a>查询有奖金的员工名和入职日期(xx月/xx日 xx年)</h5><p>SELECT last_name,DATE_FORMAT(hiredate,’%m月/%d日 %y年’) 入职日期<br>FROM employees<br>WHERE commission_pct IS NOT NULL;</p>
<h4 id="四、其他函数"><a href="#四、其他函数" class="headerlink" title="四、其他函数"></a>四、其他函数</h4><p>SELECT VERSION();<br>SELECT DATABASE();<br>SELECT USER();</p>
<h4 id="五、流程控制函数"><a href="#五、流程控制函数" class="headerlink" title="五、流程控制函数"></a>五、流程控制函数</h4><h5 id="1-if函数：-if-else-的效果"><a href="#1-if函数：-if-else-的效果" class="headerlink" title="1.if函数： if else 的效果"></a>1.if函数： if else 的效果</h5><p>SELECT IF(10&lt;5,’大’,’小’);</p>
<p>SELECT last_name,commission_pct,IF(commission_pct IS NULL,’没奖金，呵呵’,’有奖金，嘻嘻’) 备注<br>FROM employees;</p>
<h5 id="2-case函数的使用一：-switch-case-的效果"><a href="#2-case函数的使用一：-switch-case-的效果" class="headerlink" title="2.case函数的使用一： switch case 的效果"></a>2.case函数的使用一： switch case 的效果</h5><p>java中<br>switch(变量或表达式){<br>    case 常量1：语句1;break;<br>    …<br>    default:语句n;break;</p>
<p>}</p>
<p>mysql中</p>
<p>case 要判断的字段或表达式<br>when 常量1 then 要显示的值1或语句1;<br>when 常量2 then 要显示的值2或语句2;<br>…<br>else 要显示的值n或语句n;<br>end</p>
<h4 id="案例：查询员工的工资，要求"><a href="#案例：查询员工的工资，要求" class="headerlink" title="案例：查询员工的工资，要求"></a>案例：查询员工的工资，要求</h4><p>部门号=30，显示的工资为1.1倍<br>部门号=40，显示的工资为1.2倍<br>部门号=50，显示的工资为1.3倍<br>其他部门，显示的工资为原工资</p>
<p>SELECT salary 原始工资,department_id,<br>CASE department_id<br>WHEN 30 THEN salary<em>1.1<br>WHEN 40 THEN salary</em>1.2<br>WHEN 50 THEN salary*1.3<br>ELSE salary<br>END AS 新工资<br>FROM employees;</p>
<h5 id="3-case-函数的使用二：类似于-多重if"><a href="#3-case-函数的使用二：类似于-多重if" class="headerlink" title="3.case 函数的使用二：类似于 多重if"></a>3.case 函数的使用二：类似于 多重if</h5><p>java中：<br>if(条件1){<br>    语句1；<br>}else if(条件2){<br>    语句2；<br>}<br>…<br>else{<br>    语句n;<br>}</p>
<p>mysql中：</p>
<p>case<br>when 条件1 then 要显示的值1或语句1<br>when 条件2 then 要显示的值2或语句2<br>。。。<br>else 要显示的值n或语句n<br>end</p>
<h5 id="案例：查询员工的工资的情况"><a href="#案例：查询员工的工资的情况" class="headerlink" title="案例：查询员工的工资的情况"></a>案例：查询员工的工资的情况</h5><p>如果工资&gt;20000,显示A级别<br>如果工资&gt;15000,显示B级别<br>如果工资&gt;10000，显示C级别<br>否则，显示D级别</p>
<p>SELECT salary,<br>CASE<br>WHEN salary&gt;20000 THEN ‘A’<br>WHEN salary&gt;15000 THEN ‘B’<br>WHEN salary&gt;10000 THEN ‘C’<br>ELSE ‘D’<br>END AS 工资级别<br>FROM employees;</p>
<h3 id="5：分组查询"><a href="#5：分组查询" class="headerlink" title="5：分组查询"></a>5：分组查询</h3><h4 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h4><p>select 查询列表<br>from 表<br>【where 筛选条件】<br>group by 分组的字段<br>【order by 排序的字段】;</p>
<h4 id="特点：-1"><a href="#特点：-1" class="headerlink" title="特点："></a>特点：</h4><p>1、和分组函数一同查询的字段必须是group by后出现的字段<br>2、筛选分为两类：分组前筛选和分组后筛选<br>        针对的表            位置        连接的关键字<br>分组前筛选    原始表                group by前    where</p>
<p>分组后筛选    group by后的结果集            group by后    having</p>
<p>问题1：分组函数做筛选能不能放在where后面<br>答：不能</p>
<p>问题2：where——group by——having</p>
<p>一般来讲，能用分组前筛选的，尽量使用分组前筛选，提高效率</p>
<p>3、分组可以按单个字段也可以按多个字段<br>4、可以搭配着排序使用</p>
<h4 id="引入：查询每个部门的员工个数"><a href="#引入：查询每个部门的员工个数" class="headerlink" title="引入：查询每个部门的员工个数"></a>引入：查询每个部门的员工个数</h4><p>SELECT COUNT(*) FROM employees WHERE department_id=90;</p>
<h5 id="1-简单的分组"><a href="#1-简单的分组" class="headerlink" title="1.简单的分组"></a>1.简单的分组</h5><h5 id="案例1：查询每个工种的员工平均工资"><a href="#案例1：查询每个工种的员工平均工资" class="headerlink" title="案例1：查询每个工种的员工平均工资"></a>案例1：查询每个工种的员工平均工资</h5><p>SELECT AVG(salary),job_id<br>FROM employees<br>GROUP BY job_id;</p>
<h5 id="案例2：查询每个位置的部门个数"><a href="#案例2：查询每个位置的部门个数" class="headerlink" title="案例2：查询每个位置的部门个数"></a>案例2：查询每个位置的部门个数</h5><p>SELECT COUNT(*),location_id<br>FROM departments<br>GROUP BY location_id;</p>
<h5 id="2、可以实现分组前的筛选"><a href="#2、可以实现分组前的筛选" class="headerlink" title="2、可以实现分组前的筛选"></a>2、可以实现分组前的筛选</h5><h5 id="案例1：查询邮箱中包含a字符的-每个部门的最高工资"><a href="#案例1：查询邮箱中包含a字符的-每个部门的最高工资" class="headerlink" title="案例1：查询邮箱中包含a字符的 每个部门的最高工资"></a>案例1：查询邮箱中包含a字符的 每个部门的最高工资</h5><p>SELECT MAX(salary),department_id<br>FROM employees<br>WHERE email LIKE ‘%a%’<br>GROUP BY department_id;</p>
<h5 id="案例2：查询有奖金的每个领导手下员工的平均工资"><a href="#案例2：查询有奖金的每个领导手下员工的平均工资" class="headerlink" title="案例2：查询有奖金的每个领导手下员工的平均工资"></a>案例2：查询有奖金的每个领导手下员工的平均工资</h5><p>SELECT AVG(salary),manager_id<br>FROM employees<br>WHERE commission_pct IS NOT NULL<br>GROUP BY manager_id;</p>
<h5 id="3、分组后筛选"><a href="#3、分组后筛选" class="headerlink" title="3、分组后筛选"></a>3、分组后筛选</h5><p>#案例：查询哪个部门的员工个数&gt;5</p>
<h5 id="①查询每个部门的员工个数"><a href="#①查询每个部门的员工个数" class="headerlink" title="①查询每个部门的员工个数"></a>①查询每个部门的员工个数</h5><p>SELECT COUNT(*),department_id<br>FROM employees<br>GROUP BY department_id;</p>
<h5 id="②-筛选刚才①结果"><a href="#②-筛选刚才①结果" class="headerlink" title="② 筛选刚才①结果"></a>② 筛选刚才①结果</h5><p>SELECT COUNT(*),department_id<br>FROM employees</p>
<p>GROUP BY department_id</p>
<p>HAVING COUNT(*)&gt;5;</p>
<h5 id="案例2：每个工种有奖金的员工的最高工资-gt-12000的工种编号和最高工资"><a href="#案例2：每个工种有奖金的员工的最高工资-gt-12000的工种编号和最高工资" class="headerlink" title="案例2：每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资"></a>案例2：每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</h5><p>SELECT job_id,MAX(salary)<br>FROM employees<br>WHERE commission_pct IS NOT NULL<br>GROUP BY job_id<br>HAVING MAX(salary)&gt;12000;</p>
<h5 id="案例3：领导编号-gt-102的每个领导手下的最低工资大于5000的领导编号和最低工资"><a href="#案例3：领导编号-gt-102的每个领导手下的最低工资大于5000的领导编号和最低工资" class="headerlink" title="案例3：领导编号&gt;102的每个领导手下的最低工资大于5000的领导编号和最低工资"></a>案例3：领导编号&gt;102的每个领导手下的最低工资大于5000的领导编号和最低工资</h5><p>manager_id&gt;102</p>
<p>SELECT manager_id,MIN(salary)<br>FROM employees<br>GROUP BY manager_id<br>HAVING MIN(salary)&gt;5000;</p>
<h5 id="4-添加排序"><a href="#4-添加排序" class="headerlink" title="4.添加排序"></a>4.添加排序</h5><h5 id="案例：每个工种有奖金的员工的最高工资-gt-6000的工种编号和最高工资-按最高工资升序"><a href="#案例：每个工种有奖金的员工的最高工资-gt-6000的工种编号和最高工资-按最高工资升序" class="headerlink" title="案例：每个工种有奖金的员工的最高工资&gt;6000的工种编号和最高工资,按最高工资升序"></a>案例：每个工种有奖金的员工的最高工资&gt;6000的工种编号和最高工资,按最高工资升序</h5><p>SELECT job_id,MAX(salary) m<br>FROM employees<br>WHERE commission_pct IS NOT NULL<br>GROUP BY job_id<br>HAVING m&gt;6000<br>ORDER BY m ;</p>
<h5 id="5-按多个字段分组"><a href="#5-按多个字段分组" class="headerlink" title="5.按多个字段分组"></a>5.按多个字段分组</h5><h5 id="案例：查询每个工种每个部门的最低工资-并按最低工资降序"><a href="#案例：查询每个工种每个部门的最低工资-并按最低工资降序" class="headerlink" title="案例：查询每个工种每个部门的最低工资,并按最低工资降序"></a>案例：查询每个工种每个部门的最低工资,并按最低工资降序</h5><p>SELECT MIN(salary),job_id,department_id<br>FROM employees<br>GROUP BY department_id,job_id<br>ORDER BY MIN(salary) DESC;</p>
<h4 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h4><h5 id="1-查询各job-id的员工工资的最大值，最小值，平均值，总和，并按job-id升序"><a href="#1-查询各job-id的员工工资的最大值，最小值，平均值，总和，并按job-id升序" class="headerlink" title="1.查询各job_id的员工工资的最大值，最小值，平均值，总和，并按job_id升序"></a>1.查询各job_id的员工工资的最大值，最小值，平均值，总和，并按job_id升序</h5><p>SELECT MAX(salary),MIN(salary),AVG(salary),SUM(salary),job_id<br>FROM employees<br>GROUP BY job_id<br>ORDER BY job_id;</p>
<h5 id="2-查询员工最高工资和最低工资的差距（DIFFERENCE）"><a href="#2-查询员工最高工资和最低工资的差距（DIFFERENCE）" class="headerlink" title="2.查询员工最高工资和最低工资的差距（DIFFERENCE）"></a>2.查询员工最高工资和最低工资的差距（DIFFERENCE）</h5><p>SELECT MAX(salary)-MIN(salary) DIFFRENCE<br>FROM employees;</p>
<h5 id="3-查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内"><a href="#3-查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内" class="headerlink" title="3.查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内"></a>3.查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内</h5><p>SELECT MIN(salary),manager_id<br>FROM employees<br>WHERE manager_id IS NOT NULL<br>GROUP BY manager_id<br>HAVING MIN(salary)&gt;=6000;</p>
<h5 id="4-查询所有部门的编号，员工数量和工资平均值-并按平均工资降序"><a href="#4-查询所有部门的编号，员工数量和工资平均值-并按平均工资降序" class="headerlink" title="4.查询所有部门的编号，员工数量和工资平均值,并按平均工资降序"></a>4.查询所有部门的编号，员工数量和工资平均值,并按平均工资降序</h5><p>SELECT department_id,COUNT(*),AVG(salary) a<br>FROM employees<br>GROUP BY department_id<br>ORDER BY a DESC;</p>
<h5 id="5-选择具有各个job-id的员工人数"><a href="#5-选择具有各个job-id的员工人数" class="headerlink" title="5.选择具有各个job_id的员工人数"></a>5.选择具有各个job_id的员工人数</h5><p>SELECT COUNT(*) 个数,job_id<br>FROM employees<br>GROUP BY job_id;</p>
<h4 id="二、分组函数"><a href="#二、分组函数" class="headerlink" title="二、分组函数"></a>二、分组函数</h4><h5 id="功能：用作统计使用，又称为聚合函数或统计函数或组函数"><a href="#功能：用作统计使用，又称为聚合函数或统计函数或组函数" class="headerlink" title="功能：用作统计使用，又称为聚合函数或统计函数或组函数"></a>功能：用作统计使用，又称为聚合函数或统计函数或组函数</h5><h5 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h5><p>sum 求和、avg 平均值、max 最大值 、min 最小值 、count 计算个数</p>
<h5 id="特点：-2"><a href="#特点：-2" class="headerlink" title="特点："></a>特点：</h5><p>1、sum、avg一般用于处理数值型<br>   max、min、count可以处理任何类型<br>2、以上分组函数都忽略null值</p>
<p>3、可以和distinct搭配实现去重的运算</p>
<p>4、count函数的单独介绍<br>一般使用count(*)用作统计行数</p>
<p>5、和分组函数一同查询的字段要求是group by后的字段</p>
<h4 id="1、简单-的使用"><a href="#1、简单-的使用" class="headerlink" title="1、简单 的使用"></a>1、简单 的使用</h4><p>SELECT SUM(salary) FROM employees;<br>SELECT AVG(salary) FROM employees;<br>SELECT MIN(salary) FROM employees;<br>SELECT MAX(salary) FROM employees;<br>SELECT COUNT(salary) FROM employees;</p>
<p>SELECT SUM(salary) 和,AVG(salary) 平均,MAX(salary) 最高,MIN(salary) 最低,COUNT(salary) 个数<br>FROM employees;</p>
<p>SELECT SUM(salary) 和,ROUND(AVG(salary),2) 平均,MAX(salary) 最高,MIN(salary) 最低,COUNT(salary) 个数<br>FROM employees;</p>
<h4 id="2、参数支持哪些类型"><a href="#2、参数支持哪些类型" class="headerlink" title="2、参数支持哪些类型"></a>2、参数支持哪些类型</h4><p>SELECT SUM(last_name) ,AVG(last_name) FROM employees;<br>SELECT SUM(hiredate) ,AVG(hiredate) FROM employees;</p>
<p>SELECT MAX(last_name),MIN(last_name) FROM employees;</p>
<p>SELECT MAX(hiredate),MIN(hiredate) FROM employees;</p>
<p>SELECT COUNT(commission_pct) FROM employees;<br>SELECT COUNT(last_name) FROM employees;</p>
<h4 id="3、是否忽略null"><a href="#3、是否忽略null" class="headerlink" title="3、是否忽略null"></a>3、是否忽略null</h4><p>SELECT SUM(commission_pct) ,AVG(commission_pct),SUM(commission_pct)/35,SUM(commission_pct)/107 FROM employees;</p>
<p>SELECT MAX(commission_pct) ,MIN(commission_pct) FROM employees;</p>
<p>SELECT COUNT(commission_pct) FROM employees;<br>SELECT commission_pct FROM employees;</p>
<h4 id="4、和distinct搭配"><a href="#4、和distinct搭配" class="headerlink" title="4、和distinct搭配"></a>4、和distinct搭配</h4><p>SELECT SUM(DISTINCT salary),SUM(salary) FROM employees;</p>
<p>SELECT COUNT(DISTINCT salary),COUNT(salary) FROM employees;</p>
<h4 id="5、count函数的详细介绍"><a href="#5、count函数的详细介绍" class="headerlink" title="5、count函数的详细介绍"></a>5、count函数的详细介绍</h4><p>SELECT COUNT(salary) FROM employees;</p>
<p>SELECT COUNT(*) FROM employees;</p>
<p>SELECT COUNT(1) FROM employees;</p>
<h5 id="效率："><a href="#效率：" class="headerlink" title="效率："></a>效率：</h5><p>MYISAM存储引擎下  ，COUNT(<em>)的效率高<br>INNODB存储引擎下，COUNT(</em>)和COUNT(1)的效率差不多，比COUNT(字段)要高一些</p>
<h5 id="6、和分组函数一同查询的字段有限制"><a href="#6、和分组函数一同查询的字段有限制" class="headerlink" title="6、和分组函数一同查询的字段有限制"></a>6、和分组函数一同查询的字段有限制</h5><p>SELECT AVG(salary),employee_id  FROM employees;</p>
<h4 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h4><h5 id="1-查询公司员工工资的最大值，最小值，平均值，总和"><a href="#1-查询公司员工工资的最大值，最小值，平均值，总和" class="headerlink" title="1.查询公司员工工资的最大值，最小值，平均值，总和"></a>1.查询公司员工工资的最大值，最小值，平均值，总和</h5><p>SELECT MAX(salary) 最大值,MIN(salary) 最小值,AVG(salary) 平均值,SUM(salary) 和<br>FROM employees;</p>
<h4 id="2-查询员工表中的最大入职时间和最小入职时间的相差天数-（DIFFRENCE）"><a href="#2-查询员工表中的最大入职时间和最小入职时间的相差天数-（DIFFRENCE）" class="headerlink" title="#2.查询员工表中的最大入职时间和最小入职时间的相差天数 （DIFFRENCE）"></a>#2.查询员工表中的最大入职时间和最小入职时间的相差天数 （DIFFRENCE）</h4><p>SELECT MAX(hiredate) 最大,MIN(hiredate) 最小,(MAX(hiredate)-MIN(hiredate))/1000/3600/24 DIFFRENCE<br>FROM employees;</p>
<p>SELECT DATEDIFF(MAX(hiredate),MIN(hiredate)) DIFFRENCE<br>FROM employees;</p>
<p>SELECT DATEDIFF(‘1995-2-7’,’1995-2-6’);</p>
<h5 id="3-查询部门编号为90的员工个数"><a href="#3-查询部门编号为90的员工个数" class="headerlink" title="3.查询部门编号为90的员工个数"></a>3.查询部门编号为90的员工个数</h5><p>SELECT COUNT(*) FROM employees WHERE department_id = 90;</p>
<h3 id="6：连接查询"><a href="#6：连接查询" class="headerlink" title="6：连接查询"></a>6：连接查询</h3><p>/*<br>含义：又称多表查询，当查询的字段来自于多个表时，就会用到连接查询</p>
<p>笛卡尔乘积现象：表1 有m行，表2有n行，结果=m*n行</p>
<p>发生原因：没有有效的连接条件<br>如何避免：添加有效的连接条件</p>
<p>分类：</p>
<pre><code>按年代分类：
sql92标准:仅仅支持内连接
sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接

按功能分类：
    内连接：
        等值连接
        非等值连接
        自连接
    外连接：
        左外连接
        右外连接
        全外连接
    
    交叉连接
</code></pre>
<p>*/</p>
<p>SELECT * FROM beauty;</p>
<p>SELECT * FROM boys;</p>
<p>SELECT NAME,boyName FROM boys,beauty<br>WHERE beauty.boyfriend_id= boys.id;</p>
<p>#一、sql92标准<br>#1、等值连接<br>/*</p>
<p>① 多表等值连接的结果为多表的交集部分<br>②n表连接，至少需要n-1个连接条件<br>③ 多表的顺序没有要求<br>④一般需要为表起别名<br>⑤可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</p>
<p>*/</p>
<p>#案例1：查询女神名和对应的男神名<br>SELECT NAME,boyName<br>FROM boys,beauty<br>WHERE beauty.boyfriend_id= boys.id;</p>
<p>#案例2：查询员工名和对应的部门名</p>
<p>SELECT last_name,department_name<br>FROM employees,departments<br>WHERE employees.<code>department_id</code>=departments.<code>department_id</code>;</p>
<p>#2、为表起别名<br>/*<br>①提高语句的简洁度<br>②区分多个重名的字段</p>
<p>注意：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</p>
<p>*/<br>#查询员工名、工种号、工种名</p>
<p>SELECT e.last_name,e.job_id,j.job_title<br>FROM employees  e,jobs j<br>WHERE e.<code>job_id</code>=j.<code>job_id</code>;</p>
<p>#3、两个表的顺序是否可以调换</p>
<p>#查询员工名、工种号、工种名</p>
<p>SELECT e.last_name,e.job_id,j.job_title<br>FROM jobs j,employees e<br>WHERE e.<code>job_id</code>=j.<code>job_id</code>;</p>
<p>#4、可以加筛选</p>
<p>#案例：查询有奖金的员工名、部门名</p>
<p>SELECT last_name,department_name,commission_pct</p>
<p>FROM employees e,departments d<br>WHERE e.<code>department_id</code>=d.<code>department_id</code><br>AND e.<code>commission_pct</code> IS NOT NULL;</p>
<p>#案例2：查询城市名中第二个字符为o的部门名和城市名</p>
<p>SELECT department_name,city<br>FROM departments d,locations l<br>WHERE d.<code>location_id</code> = l.<code>location_id</code><br>AND city LIKE ‘_o%’;</p>
<p>#5、可以加分组</p>
<p>#案例1：查询每个城市的部门个数</p>
<p>SELECT COUNT(*) 个数,city<br>FROM departments d,locations l<br>WHERE d.<code>location_id</code>=l.<code>location_id</code><br>GROUP BY city;</p>
<p>#案例2：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资<br>SELECT department_name,d.<code>manager_id</code>,MIN(salary)<br>FROM departments d,employees e<br>WHERE d.<code>department_id</code>=e.<code>department_id</code><br>AND commission_pct IS NOT NULL<br>GROUP BY department_name,d.<code>manager_id</code>;<br>#6、可以加排序</p>
<p>#案例：查询每个工种的工种名和员工的个数，并且按员工个数降序</p>
<p>SELECT job_title,COUNT(<em>)<br>FROM employees e,jobs j<br>WHERE e.<code>job_id</code>=j.<code>job_id</code><br>GROUP BY job_title<br>ORDER BY COUNT(</em>) DESC;</p>
<p>#7、可以实现三表连接？</p>
<p>#案例：查询员工名、部门名和所在的城市</p>
<p>SELECT last_name,department_name,city<br>FROM employees e,departments d,locations l<br>WHERE e.<code>department_id</code>=d.<code>department_id</code><br>AND d.<code>location_id</code>=l.<code>location_id</code><br>AND city LIKE ‘s%’</p>
<p>ORDER BY department_name DESC;</p>
<p>#2、非等值连接</p>
<p>#案例1：查询员工的工资和工资级别</p>
<p>SELECT salary,grade_level<br>FROM employees e,job_grades g<br>WHERE salary BETWEEN g.<code>lowest_sal</code> AND g.<code>highest_sal</code><br>AND g.<code>grade_level</code>=’A’;</p>
<p>/*<br>select salary,employee_id from employees;<br>select * from job_grades;<br>CREATE TABLE job_grades<br>(grade_level VARCHAR(3),<br> lowest_sal  int,<br> highest_sal int);</p>
<p>INSERT INTO job_grades<br>VALUES (‘A’, 1000, 2999);</p>
<p>INSERT INTO job_grades<br>VALUES (‘B’, 3000, 5999);</p>
<p>INSERT INTO job_grades<br>VALUES(‘C’, 6000, 9999);</p>
<p>INSERT INTO job_grades<br>VALUES(‘D’, 10000, 14999);</p>
<p>INSERT INTO job_grades<br>VALUES(‘E’, 15000, 24999);</p>
<p>INSERT INTO job_grades<br>VALUES(‘F’, 25000, 40000);</p>
<p>*/</p>
<p>#3、自连接</p>
<p>#案例：查询 员工名和上级的名称</p>
<p>SELECT e.employee_id,e.last_name,m.employee_id,m.last_name<br>FROM employees e,employees m<br>WHERE e.<code>manager_id</code>=m.<code>employee_id</code>;</p>
<h4 id="外查询案例"><a href="#外查询案例" class="headerlink" title="外查询案例"></a>外查询案例</h4><p>一、查询编号&gt;3的女神的男朋友信息，如果有则列出详细，如果没有，用null填充</p>
<p>SELECT b.id,b.name,bo.*<br>FROM beauty b<br>LEFT OUTER JOIN boys bo<br>ON b.<code>boyfriend_id</code> = bo.<code>id</code><br>WHERE b.<code>id</code>&gt;3;<br>#二、查询哪个城市没有部门</p>
<p>SELECT city<br>FROM departments d<br>RIGHT OUTER JOIN locations l<br>ON d.<code>location_id</code>=l.<code>location_id</code><br>WHERE  d.<code>department_id</code> IS NULL;</p>
<p>#三、查询部门名为SAL或IT的员工信息</p>
<p>SELECT e.*,d.department_name,d.<code>department_id</code><br>FROM departments  d<br>LEFT JOIN employees e<br>ON d.<code>department_id</code> = e.<code>department_id</code><br>WHERE d.<code>department_name</code> IN(‘SAL’,’IT’);</p>
<p>SELECT * FROM departments<br>WHERE <code>department_name</code> IN(‘SAL’,’IT’);</p>
<h3 id="连接查询-sql99语法"><a href="#连接查询-sql99语法" class="headerlink" title="连接查询  sql99语法"></a>连接查询  sql99语法</h3><p>/*<br>语法：<br>    select 查询列表<br>    from 表1 别名 【连接类型】<br>    join 表2 别名<br>    on 连接条件<br>    【where 筛选条件】<br>    【group by 分组】<br>    【having 筛选条件】<br>    【order by 排序列表】</p>
<p>分类：<br>内连接（★）：inner<br>外连接<br>    左外(★):left 【outer】<br>    右外(★)：right 【outer】<br>    全外：full【outer】<br>交叉连接：cross </p>
<p>*/</p>
<p>#一）内连接<br>/*<br>语法：</p>
<p>select 查询列表<br>from 表1 别名<br>inner join 表2 别名<br>on 连接条件;</p>
<p>分类：<br>等值<br>非等值<br>自连接</p>
<p>特点：<br>①添加排序、分组、筛选<br>②inner可以省略<br>③ 筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读<br>④inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集</p>
<p>*/</p>
<p>#1、等值连接<br>#案例1.查询员工名、部门名</p>
<p>SELECT last_name,department_name<br>FROM departments d<br> JOIN  employees e<br>ON e.<code>department_id</code> = d.<code>department_id</code>;</p>
<p>#案例2.查询名字中包含e的员工名和工种名（添加筛选）<br>SELECT last_name,job_title<br>FROM employees e<br>INNER JOIN jobs j<br>ON e.<code>job_id</code>=  j.<code>job_id</code><br>WHERE e.<code>last_name</code> LIKE ‘%e%’;</p>
<p>#3. 查询部门个数&gt;3的城市名和部门个数，（添加分组+筛选）</p>
<p>#①查询每个城市的部门个数<br>#②在①结果上筛选满足条件的<br>SELECT city,COUNT(<em>) 部门个数<br>FROM departments d<br>INNER JOIN locations l<br>ON d.<code>location_id</code>=l.<code>location_id</code><br>GROUP BY city<br>HAVING COUNT(</em>)&gt;3;</p>
<p>#案例4.查询哪个部门的员工个数&gt;3的部门名和员工个数，并按个数降序（添加排序）</p>
<p>#①查询每个部门的员工个数<br>SELECT COUNT(*),department_name<br>FROM employees e<br>INNER JOIN departments d<br>ON e.<code>department_id</code>=d.<code>department_id</code><br>GROUP BY department_name</p>
<p>#② 在①结果上筛选员工个数&gt;3的记录，并排序</p>
<p>SELECT COUNT(<em>) 个数,department_name<br>FROM employees e<br>INNER JOIN departments d<br>ON e.<code>department_id</code>=d.<code>department_id</code><br>GROUP BY department_name<br>HAVING COUNT(</em>)&gt;3<br>ORDER BY COUNT(*) DESC;</p>
<p>#5.查询员工名、部门名、工种名，并按部门名降序（添加三表连接）</p>
<p>SELECT last_name,department_name,job_title<br>FROM employees e<br>INNER JOIN departments d ON e.<code>department_id</code>=d.<code>department_id</code><br>INNER JOIN jobs j ON e.<code>job_id</code> = j.<code>job_id</code></p>
<p>ORDER BY department_name DESC;</p>
<p>#二）非等值连接</p>
<p>#查询员工的工资级别</p>
<p>SELECT salary,grade_level<br>FROM employees e<br> JOIN job_grades g<br> ON e.<code>salary</code> BETWEEN g.<code>lowest_sal</code> AND g.<code>highest_sal</code>;</p>
<p> #查询工资级别的个数&gt;20的个数，并且按工资级别降序<br> SELECT COUNT(<em>),grade_level<br>FROM employees e<br> JOIN job_grades g<br> ON e.<code>salary</code> BETWEEN g.<code>lowest_sal</code> AND g.<code>highest_sal</code><br> GROUP BY grade_level<br> HAVING COUNT(</em>)&gt;20<br> ORDER BY grade_level DESC;</p>
<p> #三）自连接</p>
<p> #查询员工的名字、上级的名字<br> SELECT e.last_name,m.last_name<br> FROM employees e<br> JOIN employees m<br> ON e.<code>manager_id</code>= m.<code>employee_id</code>;</p>
<p>  #查询姓名中包含字符k的员工的名字、上级的名字<br> SELECT e.last_name,m.last_name<br> FROM employees e<br> JOIN employees m<br> ON e.<code>manager_id</code>= m.<code>employee_id</code><br> WHERE e.<code>last_name</code> LIKE ‘%k%’;</p>
<p> #二、外连接</p>
<p> /*<br> 应用场景：用于查询一个表中有，另一个表没有的记录</p>
<p> 特点：<br> 1、外连接的查询结果为主表中的所有记录<br>    如果从表中有和它匹配的，则显示匹配的值<br>    如果从表中没有和它匹配的，则显示null<br>    外连接查询结果=内连接结果+主表中有而从表没有的记录<br> 2、左外连接，left join左边的是主表<br>    右外连接，right join右边的是主表<br> 3、左外和右外交换两个表的顺序，可以实现同样的效果<br> 4、全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的<br> */<br> #引入：查询男朋友 不在男神表的的女神名</p>
<p> SELECT * FROM beauty;<br> SELECT * FROM boys;</p>
<p> #左外连接<br> SELECT b.<em>,bo.</em><br> FROM boys bo<br> LEFT OUTER JOIN beauty b<br> ON b.<code>boyfriend_id</code> = bo.<code>id</code><br> WHERE b.<code>id</code> IS NULL;</p>
<p> #案例1：查询哪个部门没有员工<br> #左外<br> SELECT d.*,e.employee_id<br> FROM departments d<br> LEFT OUTER JOIN employees e<br> ON d.<code>department_id</code> = e.<code>department_id</code><br> WHERE e.<code>employee_id</code> IS NULL;</p>
<p> #右外</p>
<p>  SELECT d.*,e.employee_id<br> FROM employees e<br> RIGHT OUTER JOIN departments d<br> ON d.<code>department_id</code> = e.<code>department_id</code><br> WHERE e.<code>employee_id</code> IS NULL;</p>
<p> #全外</p>
<p> USE girls;<br> SELECT b.<em>,bo.</em><br> FROM beauty b<br> FULL OUTER JOIN boys bo<br> ON b.<code>boyfriend_id</code> = bo.id;</p>
<p> #交叉连接</p>
<p> SELECT b.<em>,bo.</em><br> FROM beauty b<br> CROSS JOIN boys bo;</p>
<p> #sql92和 sql99pk<br> /*<br> 功能：sql99支持的较多<br> 可读性：sql99实现连接条件和筛选条件的分离，可读性较高<br> */</p>
<h4 id="案例-5"><a href="#案例-5" class="headerlink" title="案例"></a>案例</h4><p>#1.显示所有员工的姓名，部门号和部门名称。<br>USE myemployees;</p>
<p>SELECT last_name,d.department_id,department_name<br>FROM employees e,departments d<br>WHERE e.<code>department_id</code> = d.<code>department_id</code>;</p>
<p>#2.查询90号部门员工的job_id和90号部门的location_id</p>
<p>SELECT job_id,location_id<br>FROM employees e,departments d<br>WHERE e.<code>department_id</code>=d.<code>department_id</code><br>AND e.<code>department_id</code>=90;</p>
<p>#3.    选择所有有奖金的员工的<br>last_name , department_name , location_id , city</p>
<p>SELECT last_name , department_name , l.location_id , city<br>FROM employees e,departments d,locations l<br>WHERE e.department_id = d.department_id<br>AND d.location_id=l.location_id<br>AND e.commission_pct IS NOT NULL;</p>
<p>#4.选择city在Toronto工作的员工的<br>last_name , job_id , department_id , department_name </p>
<p>SELECT last_name , job_id , d.department_id , department_name<br>FROM employees e,departments d ,locations l<br>WHERE e.department_id = d.department_id<br>AND d.location_id=l.location_id<br>AND city = ‘Toronto’;</p>
<p>#5.查询每个工种、每个部门的部门名、工种名和最低工资</p>
<p>SELECT department_name,job_title,MIN(salary) 最低工资<br>FROM employees e,departments d,jobs j<br>WHERE e.<code>department_id</code>=d.<code>department_id</code><br>AND e.<code>job_id</code>=j.<code>job_id</code><br>GROUP BY department_name,job_title;</p>
<p>#6.查询每个国家下的部门个数大于2的国家编号</p>
<p>SELECT country_id,COUNT(*) 部门个数<br>FROM departments d,locations l<br>WHERE d.<code>location_id</code>=l.<code>location_id</code><br>GROUP BY country_id<br>HAVING 部门个数&gt;2;</p>
<p>#7、选择指定员工的姓名，员工号，以及他的管理者的姓名和员工号，结果类似于下面的格式<br>employees    Emp#    manager    Mgr#<br>kochhar        101    king    100</p>
<p>SELECT e.last_name employees,e.employee_id “Emp#”,m.last_name manager,m.employee_id “Mgr#”<br>FROM employees e,employees m<br>WHERE e.manager_id = m.employee_id<br>AND e.last_name=’kochhar’;</p>
<h3 id="分页查询-★"><a href="#分页查询-★" class="headerlink" title="分页查询 ★"></a>分页查询 ★</h3><p>/*</p>
<p>应用场景：当要显示的数据，一页显示不全，需要分页提交sql请求<br>语法：<br>    select 查询列表<br>    from 表<br>    【join type join 表2<br>    on 连接条件<br>    where 筛选条件<br>    group by 分组字段<br>    having 分组后的筛选<br>    order by 排序的字段】<br>    limit 【offset,】size;</p>
<pre><code>offset要显示条目的起始索引（起始索引从0开始）
size 要显示的条目个数
</code></pre>
<p>特点：<br>    ①limit语句放在查询语句的最后<br>    ②公式<br>    要显示的页数 page，每页的条目数size</p>
<pre><code>select 查询列表
from 表
limit (page-1)*size,size;

size=10
page  
1    0
2      10
3    20
</code></pre>
<p>*/<br>#案例1：查询前五条员工信息</p>
<p>SELECT * FROM  employees LIMIT 0,5;<br>SELECT * FROM  employees LIMIT 5;</p>
<p>#案例2：查询第11条——第25条<br>SELECT * FROM  employees LIMIT 10,15;</p>
<p>#案例3：有奖金的员工信息，并且工资较高的前10名显示出来<br>SELECT<br>    *<br>FROM<br>        employees<br>WHERE commission_pct IS NOT NULL<br>ORDER BY salary DESC<br>LIMIT 10 ;</p>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>/*<br>含义：<br>出现在其他语句中的select语句，称为子查询或内查询<br>外部的查询语句，称为主查询或外查询</p>
<p>分类：<br>按子查询出现的位置：<br>    select后面：<br>        仅仅支持标量子查询</p>
<pre><code>from后面：
    支持表子查询
where或having后面：★
    标量子查询（单行） √
    列子查询  （多行） √
    
    行子查询
    
exists后面（相关子查询）
    表子查询
</code></pre>
<p>按结果集的行列数不同：<br>    标量子查询（结果集只有一行一列）<br>    列子查询（结果集只有一列多行）<br>    行子查询（结果集有一行多列）<br>    表子查询（结果集一般为多行多列）</p>
<p>*/</p>
<p>#一、where或having后面<br>/*<br>1、标量子查询（单行子查询）<br>2、列子查询（多行子查询）</p>
<p>3、行子查询（多列多行）</p>
<p>特点：<br>①子查询放在小括号内<br>②子查询一般放在条件的右侧<br>③标量子查询，一般搭配着单行操作符使用</p>
<blockquote>
<p>&lt; &gt;= &lt;= = &lt;&gt;</p>
</blockquote>
<p>列子查询，一般搭配着多行操作符使用<br>in、any/some、all</p>
<p>④子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</p>
<p>*/<br>#1.标量子查询★</p>
<p>#案例1：谁的工资比 Abel 高?</p>
<p>#①查询Abel的工资<br>SELECT salary<br>FROM employees<br>WHERE last_name = ‘Abel’</p>
<p>#②查询员工的信息，满足 salary&gt;①结果<br>SELECT *<br>FROM employees<br>WHERE salary&gt;(</p>
<pre><code>SELECT salary
FROM employees
WHERE last_name = &#39;Abel&#39;
</code></pre>
<p>);</p>
<p>#案例2：返回job_id与141号员工相同，salary比143号员工多的员工 姓名，job_id 和工资</p>
<p>#①查询141号员工的job_id<br>SELECT job_id<br>FROM employees<br>WHERE employee_id = 141</p>
<p>#②查询143号员工的salary<br>SELECT salary<br>FROM employees<br>WHERE employee_id = 143</p>
<p>#③查询员工的姓名，job_id 和工资，要求job_id=①并且salary&gt;②</p>
<p>SELECT last_name,job_id,salary<br>FROM employees<br>WHERE job_id = (<br>    SELECT job_id<br>    FROM employees<br>    WHERE employee_id = 141<br>) AND salary&gt;(<br>    SELECT salary<br>    FROM employees<br>    WHERE employee_id = 143</p>
<p>);</p>
<p>#案例3：返回公司工资最少的员工的last_name,job_id和salary</p>
<p>#①查询公司的 最低工资<br>SELECT MIN(salary)<br>FROM employees</p>
<p>#②查询last_name,job_id和salary，要求salary=①<br>SELECT last_name,job_id,salary<br>FROM employees<br>WHERE salary=(<br>    SELECT MIN(salary)<br>    FROM employees<br>);</p>
<p>#案例4：查询最低工资大于50号部门最低工资的部门id和其最低工资</p>
<p>#①查询50号部门的最低工资<br>SELECT  MIN(salary)<br>FROM employees<br>WHERE department_id = 50</p>
<p>#②查询每个部门的最低工资</p>
<p>SELECT MIN(salary),department_id<br>FROM employees<br>GROUP BY department_id</p>
<p>#③ 在②基础上筛选，满足min(salary)&gt;①<br>SELECT MIN(salary),department_id<br>FROM employees<br>GROUP BY department_id<br>HAVING MIN(salary)&gt;(<br>    SELECT  MIN(salary)<br>    FROM employees<br>    WHERE department_id = 50</p>
<p>);</p>
<p>#非法使用标量子查询</p>
<p>SELECT MIN(salary),department_id<br>FROM employees<br>GROUP BY department_id<br>HAVING MIN(salary)&gt;(<br>    SELECT  salary<br>    FROM employees<br>    WHERE department_id = 250</p>
<p>);</p>
<p>#2.列子查询（多行子查询）★<br>#案例1：返回location_id是1400或1700的部门中的所有员工姓名</p>
<p>#①查询location_id是1400或1700的部门编号<br>SELECT DISTINCT department_id<br>FROM departments<br>WHERE location_id IN(1400,1700)</p>
<p>#②查询员工姓名，要求部门号是①列表中的某一个</p>
<p>SELECT last_name<br>FROM employees<br>WHERE department_id  &lt;&gt;ALL(<br>    SELECT DISTINCT department_id<br>    FROM departments<br>    WHERE location_id IN(1400,1700)</p>
<p>);</p>
<p>#案例2：返回其它工种中比job_id为‘IT_PROG’工种任一工资低的员工的员工号、姓名、job_id 以及salary</p>
<p>#①查询job_id为‘IT_PROG’部门任一工资</p>
<p>SELECT DISTINCT salary<br>FROM employees<br>WHERE job_id = ‘IT_PROG’</p>
<p>#②查询员工号、姓名、job_id 以及salary，salary&lt;(①)的任意一个<br>SELECT last_name,employee_id,job_id,salary<br>FROM employees<br>WHERE salary&lt;ANY(<br>    SELECT DISTINCT salary<br>    FROM employees<br>    WHERE job_id = ‘IT_PROG’</p>
<p>) AND job_id&lt;&gt;’IT_PROG’;</p>
<p>#或<br>SELECT last_name,employee_id,job_id,salary<br>FROM employees<br>WHERE salary&lt;(<br>    SELECT MAX(salary)<br>    FROM employees<br>    WHERE job_id = ‘IT_PROG’</p>
<p>) AND job_id&lt;&gt;’IT_PROG’;</p>
<p>#案例3：返回其它部门中比job_id为‘IT_PROG’部门所有工资都低的员工   的员工号、姓名、job_id 以及salary</p>
<p>SELECT last_name,employee_id,job_id,salary<br>FROM employees<br>WHERE salary&lt;ALL(<br>    SELECT DISTINCT salary<br>    FROM employees<br>    WHERE job_id = ‘IT_PROG’</p>
<p>) AND job_id&lt;&gt;’IT_PROG’;</p>
<p>#或</p>
<p>SELECT last_name,employee_id,job_id,salary<br>FROM employees<br>WHERE salary&lt;(<br>    SELECT MIN( salary)<br>    FROM employees<br>    WHERE job_id = ‘IT_PROG’</p>
<p>) AND job_id&lt;&gt;’IT_PROG’;</p>
<p>#3、行子查询（结果集一行多列或多行多列）</p>
<p>#案例：查询员工编号最小并且工资最高的员工信息</p>
<p>SELECT *<br>FROM employees<br>WHERE (employee_id,salary)=(<br>    SELECT MIN(employee_id),MAX(salary)<br>    FROM employees<br>);</p>
<p>#①查询最小的员工编号<br>SELECT MIN(employee_id)<br>FROM employees</p>
<p>#②查询最高工资<br>SELECT MAX(salary)<br>FROM employees</p>
<p>#③查询员工信息<br>SELECT *<br>FROM employees<br>WHERE employee_id=(<br>    SELECT MIN(employee_id)<br>    FROM employees</p>
<p>)AND salary=(<br>    SELECT MAX(salary)<br>    FROM employees</p>
<p>);</p>
<p>#二、select后面<br>/*<br>仅仅支持标量子查询<br>*/</p>
<p>#案例：查询每个部门的员工个数</p>
<p>SELECT d.*,(</p>
<pre><code>SELECT COUNT(*)
FROM employees e
WHERE e.department_id = d.`department_id`
</code></pre>
<p> ) 个数<br> FROM departments d;</p>
<p> #案例2：查询员工号=102的部门名</p>
<p>SELECT (<br>    SELECT department_name,e.department_id<br>    FROM departments d<br>    INNER JOIN employees e<br>    ON d.department_id=e.department_id<br>    WHERE e.employee_id=102</p>
<p>) 部门名;</p>
<p>#三、from后面<br>/*<br>将子查询结果充当一张表，要求必须起别名<br>*/</p>
<p>#案例：查询每个部门的平均工资的工资等级<br>#①查询每个部门的平均工资<br>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id</p>
<p>SELECT * FROM job_grades;</p>
<p>#②连接①的结果集和job_grades表，筛选条件平均工资 between lowest_sal and highest_sal</p>
<p>SELECT  ag_dep.*,g.<code>grade_level</code><br>FROM (<br>    SELECT AVG(salary) ag,department_id<br>    FROM employees<br>    GROUP BY department_id<br>) ag_dep<br>INNER JOIN job_grades g<br>ON ag_dep.ag BETWEEN lowest_sal AND highest_sal;</p>
<p>#四、exists后面（相关子查询）</p>
<p>/*<br>语法：<br>exists(完整的查询语句)<br>结果：<br>1或0</p>
<p>*/</p>
<p>SELECT EXISTS(SELECT employee_id FROM employees WHERE salary=300000);</p>
<p>#案例1：查询有员工的部门名</p>
<p>#in<br>SELECT department_name<br>FROM departments d<br>WHERE d.<code>department_id</code> IN(<br>    SELECT department_id<br>    FROM employees</p>
<p>)</p>
<p>#exists</p>
<p>SELECT department_name<br>FROM departments d<br>WHERE EXISTS(<br>    SELECT *<br>    FROM employees e<br>    WHERE d.<code>department_id</code>=e.<code>department_id</code></p>
<p>);</p>
<p>#案例2：查询没有女朋友的男神信息</p>
<p>#in</p>
<p>SELECT bo.*<br>FROM boys bo<br>WHERE bo.id NOT IN(<br>    SELECT boyfriend_id<br>    FROM beauty<br>)</p>
<p>#exists<br>SELECT bo.*<br>FROM boys bo<br>WHERE NOT EXISTS(<br>    SELECT boyfriend_id<br>    FROM beauty b<br>    WHERE bo.<code>id</code>=b.<code>boyfriend_id</code></p>
<p>);</p>
<p>#1.    查询和Zlotkey相同部门的员工姓名和工资</p>
<p>#①查询Zlotkey的部门<br>SELECT department_id<br>FROM employees<br>WHERE last_name = ‘Zlotkey’</p>
<p>#②查询部门号=①的姓名和工资<br>SELECT last_name,salary<br>FROM employees<br>WHERE department_id = (<br>    SELECT department_id<br>    FROM employees<br>    WHERE last_name = ‘Zlotkey’</p>
<p>)</p>
<p>#2.查询工资比公司平均工资高的员工的员工号，姓名和工资。</p>
<p>#①查询平均工资<br>SELECT AVG(salary)<br>FROM employees</p>
<p>#②查询工资&gt;①的员工号，姓名和工资。</p>
<p>SELECT last_name,employee_id,salary<br>FROM employees<br>WHERE salary&gt;(</p>
<pre><code>SELECT AVG(salary)
FROM employees
</code></pre>
<p>);</p>
<p>#3.查询各部门中工资比本部门平均工资高的员工的员工号, 姓名和工资<br>#①查询各部门的平均工资<br>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id</p>
<p>#②连接①结果集和employees表，进行筛选<br>SELECT employee_id,last_name,salary,e.department_id<br>FROM employees e<br>INNER JOIN (<br>    SELECT AVG(salary) ag,department_id<br>    FROM employees<br>    GROUP BY department_id</p>
<p>) ag_dep<br>ON e.department_id = ag_dep.department_id<br>WHERE salary&gt;ag_dep.ag ;</p>
<p>#4.    查询和姓名中包含字母u的员工在相同部门的员工的员工号和姓名<br>#①查询姓名中包含字母u的员工的部门</p>
<p>SELECT  DISTINCT department_id<br>FROM employees<br>WHERE last_name LIKE ‘%u%’</p>
<p>#②查询部门号=①中的任意一个的员工号和姓名<br>SELECT last_name,employee_id<br>FROM employees<br>WHERE department_id IN(<br>    SELECT  DISTINCT department_id<br>    FROM employees<br>    WHERE last_name LIKE ‘%u%’<br>);</p>
<p>#5. 查询在部门的location_id为1700的部门工作的员工的员工号</p>
<p>#①查询location_id为1700的部门</p>
<p>SELECT DISTINCT department_id<br>FROM departments<br>WHERE location_id  = 1700</p>
<p>#②查询部门号=①中的任意一个的员工号<br>SELECT employee_id<br>FROM employees<br>WHERE department_id =ANY(<br>    SELECT DISTINCT department_id<br>    FROM departments<br>    WHERE location_id  = 1700</p>
<p>);<br>#6.查询管理者是King的员工姓名和工资</p>
<p>#①查询姓名为king的员工编号<br>SELECT employee_id<br>FROM employees<br>WHERE last_name  = ‘K_ing’</p>
<p>#②查询哪个员工的manager_id = ①<br>SELECT last_name,salary<br>FROM employees<br>WHERE manager_id IN(<br>    SELECT employee_id<br>    FROM employees<br>    WHERE last_name  = ‘K_ing’</p>
<p>);</p>
<p>#7.查询工资最高的员工的姓名，要求first_name和last_name显示为一列，列名为 姓.名</p>
<p>#①查询最高工资<br>SELECT MAX(salary)<br>FROM employees</p>
<p>#②查询工资=①的姓.名</p>
<p>SELECT CONCAT(first_name,last_name) “姓.名”<br>FROM employees<br>WHERE salary=(<br>    SELECT MAX(salary)<br>    FROM employees</p>
<p>);</p>
<h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><p>/*</p>
<p>数据定义语言</p>
<h3 id="库和表的管理"><a href="#库和表的管理" class="headerlink" title="库和表的管理"></a>库和表的管理</h3><hr>
<p>一、库的管理<br>创建、修改、删除<br>二、表的管理<br>创建、修改、删除</p>
<p>创建： create<br>修改： alter<br>删除： drop</p>
<p>*/</p>
<p>#一、库的管理<br>#1、库的创建<br>/*<br>语法：<br>create database  [if not exists]库名;<br>*/</p>
<p>#案例：创建库Books</p>
<p>CREATE DATABASE IF NOT EXISTS books ;</p>
<p>#2、库的修改</p>
<p>RENAME DATABASE books TO 新库名;</p>
<p>#更改库的字符集</p>
<p>ALTER DATABASE books CHARACTER SET gbk;</p>
<p>#3、库的删除</p>
<p>DROP DATABASE IF EXISTS books;</p>
<p>#二、表的管理<br>#1.表的创建 ★</p>
<p>/*<br>语法：<br>create table 表名(<br>    列名 列的类型【(长度) 约束】,<br>    列名 列的类型【(长度) 约束】,<br>    列名 列的类型【(长度) 约束】,<br>    …<br>    列名 列的类型【(长度) 约束】</p>
<p>)</p>
<p>*/<br>#案例：创建表Book</p>
<p>CREATE TABLE book(<br>    id INT,#编号<br>    bName VARCHAR(20),#图书名<br>    price DOUBLE,#价格<br>    authorId  INT,#作者编号<br>    publishDate DATETIME#出版日期</p>
<p>);</p>
<p>DESC book;</p>
<p>#案例：创建表author<br>CREATE TABLE IF NOT EXISTS author(<br>    id INT,<br>    au_name VARCHAR(20),<br>    nation VARCHAR(10)</p>
<p>)<br>DESC author;</p>
<p>#2.表的修改</p>
<p>/*<br>语法<br>alter table 表名 add|drop|modify|change column 列名 【列类型 约束】;</p>
<p>*/</p>
<p>#①修改列名</p>
<p>ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME;</p>
<p>#②修改列的类型或约束<br>ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</p>
<p>#③添加新列<br>ALTER TABLE author ADD COLUMN annual DOUBLE; </p>
<p>#④删除列</p>
<p>ALTER TABLE book_author DROP COLUMN  annual;<br>#⑤修改表名</p>
<p>ALTER TABLE author RENAME TO book_author;</p>
<p>DESC book;</p>
<p>#3.表的删除</p>
<p>DROP TABLE IF EXISTS book_author;</p>
<p>SHOW TABLES;</p>
<p>#通用的写法：</p>
<p>DROP DATABASE IF EXISTS 旧库名;<br>CREATE DATABASE 新库名;</p>
<p>DROP TABLE IF EXISTS 旧表名;<br>CREATE TABLE  表名();</p>
<p>#4.表的复制</p>
<p>INSERT INTO author VALUES<br>(1,’村上春树’,’日本’),<br>(2,’莫言’,’中国’),<br>(3,’冯唐’,’中国’),<br>(4,’金庸’,’中国’);</p>
<p>SELECT * FROM Author;<br>SELECT * FROM copy2;<br>#1.仅仅复制表的结构</p>
<p>CREATE TABLE copy LIKE author;</p>
<p>#2.复制表的结构+数据<br>CREATE TABLE copy2<br>SELECT * FROM author;</p>
<p>#只复制部分数据<br>CREATE TABLE copy3<br>SELECT id,au_name<br>FROM author<br>WHERE nation=’中国’;</p>
<p>#仅仅复制某些字段</p>
<p>CREATE TABLE copy4<br>SELECT id,au_name<br>FROM author<br>WHERE 0;</p>
<h4 id="案例-6"><a href="#案例-6" class="headerlink" title="案例"></a>案例</h4><ol>
<li>创建表dept1<br>NAME    NULL?    TYPE<br>id        INT(7)<br>NAME        VARCHAR(25)</li>
</ol>
<p>USE test;</p>
<p>CREATE TABLE dept1(<br>    id INT(7),<br>    NAME VARCHAR(25)</p>
<p>);</p>
<ol start="2">
<li>将表departments中的数据插入新表dept2中</li>
</ol>
<p>CREATE TABLE dept2<br>SELECT department_id,department_name<br>FROM myemployees.departments;</p>
<p>#3.    创建表emp5<br>NAME    NULL?    TYPE<br>id        INT(7)<br>First_name    VARCHAR (25)<br>Last_name    VARCHAR(25)<br>Dept_id        INT(7)</p>
<p>CREATE TABLE emp5(<br>id INT(7),<br>first_name VARCHAR(25),<br>last_name VARCHAR(25),<br>dept_id INT(7)</p>
<p>);</p>
<p>#4.    将列Last_name的长度增加到50</p>
<p>ALTER TABLE emp5 MODIFY COLUMN last_name VARCHAR(50);<br>#5.    根据表employees创建employees2</p>
<p>CREATE TABLE employees2 LIKE myemployees.employees;</p>
<p>#6.    删除表emp5<br>DROP TABLE IF EXISTS emp5;</p>
<p>#7.    将表employees2重命名为emp5</p>
<p>ALTER TABLE employees2 RENAME TO emp5;</p>
<p>#8.在表dept和emp5中添加新列test_column，并检查所作的操作</p>
<p>ALTER TABLE emp5 ADD COLUMN test_column INT;<br>#9.直接删除表emp5中的列 dept_id<br>DESC emp5;<br>ALTER TABLE emp5 DROP COLUMN test_column;</p>
<h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><hr>
<p>union 联合 合并：将多条查询语句的结果合并成一个结果</p>
<p>语法：<br>查询语句1<br>union<br>查询语句2<br>union<br>…</p>
<p>应用场景：<br>要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时</p>
<p>特点：★<br>1、要求多条查询语句的查询列数是一致的！<br>2、要求多条查询语句的查询的每一列的类型和顺序最好一致<br>3、union关键字默认去重，如果使用union all 可以包含重复项</p>
<p>*/</p>
<p>#引入的案例：查询部门编号&gt;90或邮箱包含a的员工信息</p>
<p>SELECT * FROM employees WHERE email LIKE ‘%a%’ OR department_id&gt;90;;</p>
<p>SELECT * FROM employees  WHERE email LIKE ‘%a%’<br>UNION<br>SELECT * FROM employees  WHERE department_id&gt;90;</p>
<p>#案例：查询中国用户中男性的信息以及外国用户中年男性的用户信息</p>
<p>SELECT id,cname FROM t_ca WHERE csex=’男’<br>UNION ALL<br>SELECT t_id,tname FROM t_ua WHERE tGender=’male’;</p>
<h2 id="DML语言"><a href="#DML语言" class="headerlink" title="DML语言"></a>DML语言</h2><p>/*</p>
<p>数据操作语言：<br>插入：insert<br>修改：update<br>删除：delete</p>
<p>*/</p>
<p>#一、插入语句<br>#方式一：经典的插入<br>/*<br>语法：<br>insert into 表名(列名,…) values(值1,…);</p>
<p>*/<br>SELECT * FROM beauty;<br>#1.插入的值的类型要与列的类型一致或兼容<br>INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)<br>VALUES(13,’唐艺昕’,’女’,’1990-4-23’,’1898888888’,NULL,2);</p>
<p>#2.不可以为null的列必须插入值。可以为null的列如何插入值？<br>#方式一：<br>INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)<br>VALUES(13,’唐艺昕’,’女’,’1990-4-23’,’1898888888’,NULL,2);</p>
<p>#方式二：</p>
<p>INSERT INTO beauty(id,NAME,sex,phone)<br>VALUES(15,’娜扎’,’女’,’1388888888’);</p>
<p>#3.列的顺序是否可以调换<br>INSERT INTO beauty(NAME,sex,id,phone)<br>VALUES(‘蒋欣’,’女’,16,’110’);</p>
<p>#4.列数和值的个数必须一致</p>
<p>INSERT INTO beauty(NAME,sex,id,phone)<br>VALUES(‘关晓彤’,’女’,17,’110’);</p>
<p>#5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</p>
<p>INSERT INTO beauty<br>VALUES(18,’张飞’,’男’,NULL,’119’,NULL,NULL);</p>
<p>#方式二：<br>/*</p>
<p>语法：<br>insert into 表名<br>set 列名=值,列名=值,…<br>*/</p>
<p>INSERT INTO beauty<br>SET id=19,NAME=’刘涛’,phone=’999’;</p>
<p>#两种方式大pk ★</p>
<p>#1、方式一支持插入多行,方式二不支持</p>
<p>INSERT INTO beauty<br>VALUES(23,’唐艺昕1’,’女’,’1990-4-23’,’1898888888’,NULL,2)<br>,(24,’唐艺昕2’,’女’,’1990-4-23’,’1898888888’,NULL,2)<br>,(25,’唐艺昕3’,’女’,’1990-4-23’,’1898888888’,NULL,2);</p>
<p>#2、方式一支持子查询，方式二不支持</p>
<p>INSERT INTO beauty(id,NAME,phone)<br>SELECT 26,’宋茜’,’11809866’;</p>
<p>INSERT INTO beauty(id,NAME,phone)<br>SELECT id,boyname,’1234567’<br>FROM boys WHERE id&lt;3;</p>
<p>#二、修改语句</p>
<p>/*</p>
<p>1.修改单表的记录★</p>
<p>语法：<br>update 表名<br>set 列=新值,列=新值,…<br>where 筛选条件;</p>
<p>2.修改多表的记录【补充】</p>
<p>语法：<br>sql92语法：<br>update 表1 别名,表2 别名<br>set 列=值,…<br>where 连接条件<br>and 筛选条件;</p>
<p>sql99语法：<br>update 表1 别名<br>inner|left|right join 表2 别名<br>on 连接条件<br>set 列=值,…<br>where 筛选条件;</p>
<p>*/</p>
<p>#1.修改单表的记录<br>#案例1：修改beauty表中姓唐的女神的电话为13899888899</p>
<p>UPDATE beauty SET phone = ‘13899888899’<br>WHERE NAME LIKE ‘唐%’;</p>
<p>#案例2：修改boys表中id好为2的名称为张飞，魅力值 10<br>UPDATE boys SET boyname=’张飞’,usercp=10<br>WHERE id=2;</p>
<p>#2.修改多表的记录</p>
<p>#案例 1：修改张无忌的女朋友的手机号为114</p>
<p>UPDATE boys bo<br>INNER JOIN beauty b ON bo.<code>id</code>=b.<code>boyfriend_id</code><br>SET b.<code>phone</code>=’119’,bo.<code>userCP</code>=1000<br>WHERE bo.<code>boyName</code>=’张无忌’;</p>
<p>#案例2：修改没有男朋友的女神的男朋友编号都为2号</p>
<p>UPDATE boys bo<br>RIGHT JOIN beauty b ON bo.<code>id</code>=b.<code>boyfriend_id</code><br>SET b.<code>boyfriend_id</code>=2<br>WHERE bo.<code>id</code> IS NULL;</p>
<p>SELECT * FROM boys;</p>
<p>#三、删除语句<br>/*</p>
<p>方式一：delete<br>语法：</p>
<p>1、单表的删除【★】<br>delete from 表名 where 筛选条件</p>
<p>2、多表的删除【补充】</p>
<p>sql92语法：<br>delete 表1的别名,表2的别名<br>from 表1 别名,表2 别名<br>where 连接条件<br>and 筛选条件;</p>
<p>sql99语法：</p>
<p>delete 表1的别名,表2的别名<br>from 表1 别名<br>inner|left|right join 表2 别名 on 连接条件<br>where 筛选条件;</p>
<p>方式二：truncate<br>语法：truncate table 表名;</p>
<p>*/</p>
<p>#方式一：delete<br>#1.单表的删除<br>#案例：删除手机号以9结尾的女神信息</p>
<p>DELETE FROM beauty WHERE phone LIKE ‘%9’;<br>SELECT * FROM beauty;</p>
<p>#2.多表的删除</p>
<p>#案例：删除张无忌的女朋友的信息</p>
<p>DELETE b<br>FROM beauty b<br>INNER JOIN boys bo ON b.<code>boyfriend_id</code> = bo.<code>id</code><br>WHERE bo.<code>boyName</code>=’张无忌’;</p>
<p>#案例：删除黄晓明的信息以及他女朋友的信息<br>DELETE b,bo<br>FROM beauty b<br>INNER JOIN boys bo ON b.<code>boyfriend_id</code>=bo.<code>id</code><br>WHERE bo.<code>boyName</code>=’黄晓明’;</p>
<p>#方式二：truncate语句</p>
<p>#案例：将魅力值&gt;100的男神信息删除<br>TRUNCATE TABLE boys ;</p>
<p>#delete pk truncate【面试题★】</p>
<p>/*</p>
<p>1.delete 可以加where 条件，truncate不能加</p>
<p>2.truncate删除，效率高一丢丢<br>3.假如要删除的表中有自增长列，<br>如果用delete删除后，再插入数据，自增长列的值从断点开始，<br>而truncate删除后，再插入数据，自增长列的值从1开始。<br>4.truncate删除没有返回值，delete删除有返回值</p>
<p>5.truncate删除不能回滚，delete删除可以回滚.</p>
<p>*/</p>
<p>SELECT * FROM boys;</p>
<p>DELETE FROM boys;<br>TRUNCATE TABLE boys;<br>INSERT INTO boys (boyname,usercp)<br>VALUES(‘张飞’,100),(‘刘备’,100),(‘关云长’,100);</p>
<h4 id="案例-7"><a href="#案例-7" class="headerlink" title="案例"></a>案例</h4><ol>
<li>运行以下脚本创建表my_employees</li>
</ol>
<p>USE myemployees;<br>CREATE TABLE my_employees(<br>    Id INT(10),<br>    First_name VARCHAR(10),<br>    Last_name VARCHAR(10),<br>    Userid VARCHAR(10),<br>    Salary DOUBLE(10,2)<br>);<br>CREATE TABLE users(<br>    id INT,<br>    userid VARCHAR(10),<br>    department_id INT</p>
<p>);<br>#2.    显示表my_employees的结构<br>DESC my_employees;</p>
<p>#3.    向my_employees表中插入下列数据<br>ID    FIRST_NAME    LAST_NAME    USERID    SALARY<br>1    patel        Ralph        Rpatel    895<br>2    Dancs        Betty        Bdancs    860<br>3    Biri        Ben        Bbiri    1100<br>4    Newman        Chad        Cnewman    750<br>5    Ropeburn    Audrey        Aropebur    1550</p>
<p>#方式一：<br>INSERT INTO my_employees<br>VALUES(1,’patel’,’Ralph’,’Rpatel’,895),<br>(2,’Dancs’,’Betty’,’Bdancs’,860),<br>(3,’Biri’,’Ben’,’Bbiri’,1100),<br>(4,’Newman’,’Chad’,’Cnewman’,750),<br>(5,’Ropeburn’,’Audrey’,’Aropebur’,1550);<br>DELETE FROM my_employees;<br>#方式二：</p>
<p>INSERT INTO my_employees<br>SELECT 1,’patel’,’Ralph’,’Rpatel’,895 UNION<br>SELECT 2,’Dancs’,’Betty’,’Bdancs’,860 UNION<br>SELECT 3,’Biri’,’Ben’,’Bbiri’,1100 UNION<br>SELECT 4,’Newman’,’Chad’,’Cnewman’,750 UNION<br>SELECT 5,’Ropeburn’,’Audrey’,’Aropebur’,1550;</p>
<p>#4.     向users表中插入数据<br>1    Rpatel    10<br>2    Bdancs    10<br>3    Bbiri    20<br>4    Cnewman    30<br>5    Aropebur    40</p>
<p>INSERT INTO users<br>VALUES(1,’Rpatel’,10),<br>(2,’Bdancs’,10),<br>(3,’Bbiri’,20);</p>
<p>#5.将3号员工的last_name修改为“drelxer”<br>UPDATE my_employees SET last_name=’drelxer’ WHERE id = 3;</p>
<p>#6.将所有工资少于900的员工的工资修改为1000<br>UPDATE my_employees SET salary=1000 WHERE salary&lt;900;</p>
<p>#7.将userid 为Bbiri的user表和my_employees表的记录全部删除</p>
<p>DELETE u,e<br>FROM users u<br>JOIN my_employees e ON u.<code>userid</code>=e.<code>Userid</code><br>WHERE u.<code>userid</code>=’Bbiri’;</p>
<p>#8.删除所有数据</p>
<p>DELETE FROM my_employees;<br>DELETE FROM users;<br>#9.检查所作的修正</p>
<p>SELECT * FROM my_employees;<br>SELECT * FROM users;</p>
<p>#10.清空表my_employees<br>TRUNCATE TABLE my_employees;</p>
<h3 id="常见的数据类型"><a href="#常见的数据类型" class="headerlink" title="常见的数据类型"></a>常见的数据类型</h3><hr>
<p>/*<br>数值型：<br>    整型<br>    小数：<br>        定点数<br>        浮点数<br>字符型：<br>    较短的文本：char、varchar<br>    较长的文本：text、blob（较长的二进制数据）</p>
<p>日期型：</p>
<p>*/</p>
<p>#一、整型<br>/*<br>分类：<br>tinyint、smallint、mediumint、int/integer、bigint<br>1     2        3    4        8</p>
<p>特点：<br>① 如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字<br>② 如果插入的数值超出了整型的范围,会报out of range异常，并且插入临界值<br>③ 如果不设置长度，会有默认的长度<br>长度代表了显示的最大宽度，如果不够会用0在左边填充，但必须搭配zerofill使用！</p>
<p>*/</p>
<p>#1.如何设置无符号和有符号</p>
<p>DROP TABLE IF EXISTS tab_int;<br>CREATE TABLE tab_int(<br>    t1 INT(7) ZEROFILL,<br>    t2 INT(7) ZEROFILL </p>
<p>);</p>
<p>DESC tab_int;</p>
<p>INSERT INTO tab_int VALUES(-123456);<br>INSERT INTO tab_int VALUES(-123456,-123456);<br>INSERT INTO tab_int VALUES(2147483648,4294967296);</p>
<p>INSERT INTO tab_int VALUES(123,123);</p>
<p>SELECT * FROM tab_int;</p>
<p>#二、小数<br>/*<br>分类：<br>1.浮点型<br>float(M,D)<br>double(M,D)<br>2.定点型<br>dec(M，D)<br>decimal(M,D)</p>
<p>特点：</p>
<p>①<br>M：整数部位+小数部位<br>D：小数部位<br>如果超过范围，则插入临界值</p>
<p>②<br>M和D都可以省略<br>如果是decimal，则M默认为10，D默认为0<br>如果是float和double，则会根据插入的数值的精度来决定精度</p>
<p>③定点型的精确度较高，如果要求插入数值的精度较高如货币运算等则考虑使用</p>
<p>*/<br>#测试M和D</p>
<p>DROP TABLE tab_float;<br>CREATE TABLE tab_float(<br>    f1 FLOAT,<br>    f2 DOUBLE,<br>    f3 DECIMAL<br>);<br>SELECT * FROM tab_float;<br>DESC tab_float;</p>
<p>INSERT INTO tab_float VALUES(123.4523,123.4523,123.4523);<br>INSERT INTO tab_float VALUES(123.456,123.456,123.456);<br>INSERT INTO tab_float VALUES(123.4,123.4,123.4);<br>INSERT INTO tab_float VALUES(1523.4,1523.4,1523.4);</p>
<p>#原则：<br>/*<br>所选择的类型越简单越好，能保存数值的类型越小越好</p>
<p>*/</p>
<p>#三、字符型<br>/*<br>较短的文本：</p>
<p>char<br>varchar</p>
<p>其他：</p>
<p>binary和varbinary用于保存较短的二进制<br>enum用于保存枚举<br>set用于保存集合</p>
<p>较长的文本：<br>text<br>blob(较大的二进制)</p>
<p>特点：</p>
<pre><code>写法        M的意思                    特点            空间的耗费    效率
</code></pre>
<p>char    char(M)        最大的字符数，可以省略，默认为1        固定长度的字符        比较耗费    高</p>
<p>varchar varchar(M)    最大的字符数，不可以省略        可变长度的字符        比较节省    低<br>*/</p>
<p>CREATE TABLE tab_char(<br>    c1 ENUM(‘a’,’b’,’c’)</p>
<p>);</p>
<p>INSERT INTO tab_char VALUES(‘a’);<br>INSERT INTO tab_char VALUES(‘b’);<br>INSERT INTO tab_char VALUES(‘c’);<br>INSERT INTO tab_char VALUES(‘m’);<br>INSERT INTO tab_char VALUES(‘A’);</p>
<p>SELECT * FROM tab_set;</p>
<p>CREATE TABLE tab_set(</p>
<pre><code>s1 SET(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;)
</code></pre>
<p>);<br>INSERT INTO tab_set VALUES(‘a’);<br>INSERT INTO tab_set VALUES(‘A,B’);<br>INSERT INTO tab_set VALUES(‘a,c,d’);</p>
<p>#四、日期型</p>
<p>/*</p>
<p>分类：<br>date只保存日期<br>time 只保存时间<br>year只保存年</p>
<p>datetime保存日期+时间<br>timestamp保存日期+时间</p>
<p>特点：</p>
<pre><code>    字节        范围        时区等的影响
</code></pre>
<p>datetime                   8        1000——9999                      不受<br>timestamp    4                   1970-2038                        受</p>
<p>*/</p>
<p>CREATE TABLE tab_date(<br>    t1 DATETIME,<br>    t2 TIMESTAMP</p>
<p>);</p>
<p>INSERT INTO tab_date VALUES(NOW(),NOW());</p>
<p>SELECT * FROM tab_date;</p>
<p>SHOW VARIABLES LIKE ‘time_zone’;</p>
<p>SET time_zone=’+9:00’;</p>
<h3 id="子查询案例"><a href="#子查询案例" class="headerlink" title="子查询案例"></a>子查询案例</h3><hr>
<h4 id="1-查询工资最低的员工信息-last-name-salary"><a href="#1-查询工资最低的员工信息-last-name-salary" class="headerlink" title="1. 查询工资最低的员工信息: last_name, salary"></a>1. 查询工资最低的员工信息: last_name, salary</h4><p>#①查询最低的工资<br>SELECT MIN(salary)<br>FROM employees</p>
<p>#②查询last_name,salary，要求salary=①<br>SELECT last_name,salary<br>FROM employees<br>WHERE salary=(<br>    SELECT MIN(salary)<br>    FROM employees<br>);</p>
<h4 id="2-查询平均工资最低的部门信息"><a href="#2-查询平均工资最低的部门信息" class="headerlink" title="2. 查询平均工资最低的部门信息"></a>2. 查询平均工资最低的部门信息</h4><p>#方式一：<br>#①各部门的平均工资<br>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id<br>#②查询①结果上的最低平均工资<br>SELECT MIN(ag)<br>FROM (<br>    SELECT AVG(salary) ag,department_id<br>    FROM employees<br>    GROUP BY department_id<br>) ag_dep</p>
<p>#③查询哪个部门的平均工资=②</p>
<p>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id<br>HAVING AVG(salary)=(<br>    SELECT MIN(ag)<br>    FROM (<br>        SELECT AVG(salary) ag,department_id<br>        FROM employees<br>        GROUP BY department_id<br>    ) ag_dep</p>
<p>);</p>
<p>#④查询部门信息</p>
<p>SELECT d.*<br>FROM departments d<br>WHERE d.<code>department_id</code>=(<br>    SELECT department_id<br>    FROM employees<br>    GROUP BY department_id<br>    HAVING AVG(salary)=(<br>        SELECT MIN(ag)<br>        FROM (<br>            SELECT AVG(salary) ag,department_id<br>            FROM employees<br>            GROUP BY department_id<br>        ) ag_dep</p>
<pre><code>)
</code></pre>
<p>);</p>
<p>#方式二：<br>#①各部门的平均工资<br>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id</p>
<p>#②求出最低平均工资的部门编号<br>SELECT department_id<br>FROM employees<br>GROUP BY department_id<br>ORDER BY AVG(salary)<br>LIMIT 1;</p>
<p>#③查询部门信息<br>SELECT *<br>FROM departments<br>WHERE department_id=(<br>    SELECT department_id<br>    FROM employees<br>    GROUP BY department_id<br>    ORDER BY AVG(salary)<br>    LIMIT 1<br>);</p>
<h4 id="3-查询平均工资最低的部门信息和该部门的平均工资"><a href="#3-查询平均工资最低的部门信息和该部门的平均工资" class="headerlink" title="3. 查询平均工资最低的部门信息和该部门的平均工资"></a>3. 查询平均工资最低的部门信息和该部门的平均工资</h4><p>#①各部门的平均工资<br>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id<br>#②求出最低平均工资的部门编号<br>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id<br>ORDER BY AVG(salary)<br>LIMIT 1;<br>#③查询部门信息<br>SELECT d.*,ag<br>FROM departments d<br>JOIN (<br>    SELECT AVG(salary) ag,department_id<br>    FROM employees<br>    GROUP BY department_id<br>    ORDER BY AVG(salary)<br>    LIMIT 1</p>
<p>) ag_dep<br>ON d.<code>department_id</code>=ag_dep.department_id;</p>
<h4 id="4-查询平均工资最高的-job-信息"><a href="#4-查询平均工资最高的-job-信息" class="headerlink" title="4. 查询平均工资最高的 job 信息"></a>4. 查询平均工资最高的 job 信息</h4><p>#①查询最高的job的平均工资<br>SELECT AVG(salary),job_id<br>FROM employees<br>GROUP BY job_id<br>ORDER BY AVG(salary) DESC<br>LIMIT 1</p>
<p>#②查询job信息<br>SELECT *<br>FROM jobs<br>WHERE job_id=(<br>    SELECT job_id<br>    FROM employees<br>    GROUP BY job_id<br>    ORDER BY AVG(salary) DESC<br>    LIMIT 1</p>
<p>);</p>
<h4 id="5-查询平均工资高于公司平均工资的部门有哪些"><a href="#5-查询平均工资高于公司平均工资的部门有哪些" class="headerlink" title="5. 查询平均工资高于公司平均工资的部门有哪些?"></a>5. 查询平均工资高于公司平均工资的部门有哪些?</h4><p>#①查询平均工资<br>SELECT AVG(salary)<br>FROM employees</p>
<p>#②查询每个部门的平均工资<br>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id</p>
<p>#③筛选②结果集，满足平均工资&gt;①</p>
<p>SELECT AVG(salary),department_id<br>FROM employees<br>GROUP BY department_id<br>HAVING AVG(salary)&gt;(<br>    SELECT AVG(salary)<br>    FROM employees</p>
<p>);</p>
<h4 id="6-查询出公司中所有-manager-的详细信息"><a href="#6-查询出公司中所有-manager-的详细信息" class="headerlink" title="6. 查询出公司中所有 manager 的详细信息."></a>6. 查询出公司中所有 manager 的详细信息.</h4><p>#①查询所有manager的员工编号<br>SELECT DISTINCT manager_id<br>FROM employees</p>
<p>#②查询详细信息，满足employee_id=①<br>SELECT *<br>FROM employees<br>WHERE employee_id =ANY(<br>    SELECT DISTINCT manager_id<br>    FROM employees</p>
<p>);</p>
<h4 id="7-各个部门中-最高工资中最低的那个部门的-最低工资是多少"><a href="#7-各个部门中-最高工资中最低的那个部门的-最低工资是多少" class="headerlink" title="7. 各个部门中 最高工资中最低的那个部门的 最低工资是多少"></a>7. 各个部门中 最高工资中最低的那个部门的 最低工资是多少</h4><p>#①查询各部门的最高工资中最低的部门编号<br>SELECT department_id<br>FROM employees<br>GROUP BY department_id<br>ORDER BY MAX(salary)<br>LIMIT 1</p>
<p>#②查询①结果的那个部门的最低工资</p>
<p>SELECT MIN(salary) ,department_id<br>FROM employees<br>WHERE department_id=(<br>    SELECT department_id<br>    FROM employees<br>    GROUP BY department_id<br>    ORDER BY MAX(salary)<br>    LIMIT 1</p>
<p>);</p>
<h4 id="8-查询平均工资最高的部门的-manager-的详细信息-last-name-department-id-email-salary"><a href="#8-查询平均工资最高的部门的-manager-的详细信息-last-name-department-id-email-salary" class="headerlink" title="8. 查询平均工资最高的部门的 manager 的详细信息: last_name, department_id, email, salary"></a>8. 查询平均工资最高的部门的 manager 的详细信息: last_name, department_id, email, salary</h4><p>#①查询平均工资最高的部门编号<br>SELECT<br>    department_id<br>FROM<br>    employees<br>GROUP BY department_id<br>ORDER BY AVG(salary) DESC<br>LIMIT 1 </p>
<p>#②将employees和departments连接查询，筛选条件是①<br>    SELECT<br>        last_name, d.department_id, email, salary<br>    FROM<br>        employees e<br>        INNER JOIN departments d<br>            ON d.manager_id = e.employee_id<br>    WHERE d.department_id =<br>        (SELECT<br>            department_id<br>        FROM<br>            employees<br>        GROUP BY department_id<br>        ORDER BY AVG(salary) DESC<br>        LIMIT 1) ;</p>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><p>#常见约束</p>
<p>/*</p>
<p>含义：一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p>
<p>分类：六大约束<br>    NOT NULL：非空，用于保证该字段的值不能为空<br>    比如姓名、学号等<br>    DEFAULT:默认，用于保证该字段有默认值<br>    比如性别<br>    PRIMARY KEY:主键，用于保证该字段的值具有唯一性，并且非空<br>    比如学号、员工编号等<br>    UNIQUE:唯一，用于保证该字段的值具有唯一性，可以为空<br>    比如座位号<br>    CHECK:检查约束【mysql中不支持】<br>    比如年龄、性别<br>    FOREIGN KEY:外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值<br>        在从表添加外键约束，用于引用主表中某列的值<br>    比如学生表的专业编号，员工表的部门编号，员工表的工种编号</p>
<p>添加约束的时机：<br>    1.创建表时<br>    2.修改表时</p>
<p>约束的添加分类：<br>    列级约束：<br>        六大约束语法上都支持，但外键约束没有效果</p>
<pre><code>表级约束：
    
    除了非空、默认，其他的都支持
</code></pre>
<p>​<br>主键和唯一的大对比：</p>
<pre><code>    保证唯一性  是否允许为空    一个表中可以有多少个   是否允许组合
主键    √        ×        至多有1个           √，但不推荐
唯一    √        √        可以有多个          √，但不推荐
</code></pre>
<p>外键：<br>    1、要求在从表设置外键关系<br>    2、从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求<br>    3、主表的关联列必须是一个key（一般是主键或唯一）<br>    4、插入数据时，先插入主表，再插入从表<br>    删除数据时，先删除从表，再删除主表</p>
<p>*/</p>
<p>CREATE TABLE 表名(<br>    字段名 字段类型 列级约束,<br>    字段名 字段类型,<br>    表级约束</p>
<p>)<br>CREATE DATABASE students;<br>#一、创建表时添加约束</p>
<p>#1.添加列级约束<br>/*<br>语法：</p>
<p>直接在字段名和类型后面追加 约束类型即可。</p>
<p>只支持：默认、非空、主键、唯一</p>
<p>*/</p>
<p>USE students;<br>DROP TABLE stuinfo;<br>CREATE TABLE stuinfo(<br>    id INT PRIMARY KEY,#主键<br>    stuName VARCHAR(20) NOT NULL UNIQUE,#非空<br>    gender CHAR(1) CHECK(gender=’男’ OR gender =’女’),#检查<br>    seat INT UNIQUE,#唯一<br>    age INT DEFAULT  18,#默认约束<br>    majorId INT REFERENCES major(id)#外键</p>
<p>);</p>
<p>CREATE TABLE major(<br>    id INT PRIMARY KEY,<br>    majorName VARCHAR(20)<br>);</p>
<p>#查看stuinfo中的所有索引，包括主键、外键、唯一<br>SHOW INDEX FROM stuinfo;</p>
<p>#2.添加表级约束<br>/*</p>
<p>语法：在各个字段的最下面<br> 【constraint 约束名】 约束类型(字段名)<br>*/</p>
<p>DROP TABLE IF EXISTS stuinfo;<br>CREATE TABLE stuinfo(<br>    id INT,<br>    stuname VARCHAR(20),<br>    gender CHAR(1),<br>    seat INT,<br>    age INT,<br>    majorid INT,</p>
<pre><code>CONSTRAINT pk PRIMARY KEY(id),#主键
CONSTRAINT uq UNIQUE(seat),#唯一键
CONSTRAINT ck CHECK(gender =&#39;男&#39; OR gender  = &#39;女&#39;),#检查
CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)#外键
</code></pre>
<p>);</p>
<p>SHOW INDEX FROM stuinfo;</p>
<p>#通用的写法：★</p>
<p>CREATE TABLE IF NOT EXISTS stuinfo(<br>    id INT PRIMARY KEY,<br>    stuname VARCHAR(20),<br>    sex CHAR(1),<br>    age INT DEFAULT 18,<br>    seat INT UNIQUE,<br>    majorid INT,<br>    CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)</p>
<p>);</p>
<p>#二、修改表时添加约束</p>
<p>/*<br>1、添加列级约束<br>alter table 表名 modify column 字段名 字段类型 新约束;</p>
<p>2、添加表级约束<br>alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;</p>
<p>*/<br>DROP TABLE IF EXISTS stuinfo;<br>CREATE TABLE stuinfo(<br>    id INT,<br>    stuname VARCHAR(20),<br>    gender CHAR(1),<br>    seat INT,<br>    age INT,<br>    majorid INT<br>)<br>DESC stuinfo;<br>#1.添加非空约束<br>ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20)  NOT NULL;<br>#2.添加默认约束<br>ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;<br>#3.添加主键<br>#①列级约束<br>ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;<br>#②表级约束<br>ALTER TABLE stuinfo ADD PRIMARY KEY(id);</p>
<p>#4.添加唯一</p>
<p>#①列级约束<br>ALTER TABLE stuinfo MODIFY COLUMN seat INT UNIQUE;<br>#②表级约束<br>ALTER TABLE stuinfo ADD UNIQUE(seat);</p>
<p>#5.添加外键<br>ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id); </p>
<p>#三、修改表时删除约束</p>
<p>#1.删除非空约束<br>ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</p>
<p>#2.删除默认约束<br>ALTER TABLE stuinfo MODIFY COLUMN age INT ;</p>
<p>#3.删除主键<br>ALTER TABLE stuinfo DROP PRIMARY KEY;</p>
<p>#4.删除唯一<br>ALTER TABLE stuinfo DROP INDEX seat;</p>
<p>#5.删除外键<br>ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;</p>
<p>SHOW INDEX FROM stuinfo;</p>
<h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p>#1.向表emp2的id列中添加PRIMARY KEY约束（my_emp_id_pk）</p>
<p>ALTER TABLE emp2 MODIFY COLUMN id INT PRIMARY KEY;<br>ALTER TABLE emp2 ADD CONSTRAINT my_emp_id_pk PRIMARY KEY(id);</p>
<p>#2.    向表dept2的id列中添加PRIMARY KEY约束（my_dept_id_pk）</p>
<p>#3.    向表emp2中添加列dept_id，并在其中定义FOREIGN KEY约束，与之相关联的列是dept2表中的id列。<br>ALTER TABLE emp2 ADD COLUMN dept_id INT;<br>ALTER TABLE emp2 ADD CONSTRAINT fk_emp2_dept2 FOREIGN KEY(dept_id) REFERENCES dept2(id);</p>
<pre><code>    位置        支持的约束类型            是否可以起约束名
</code></pre>
<p>列级约束：    列的后面    语法都支持，但外键没有效果    不可以<br>表级约束：    所有列的下面    默认和非空不支持，其他支持    可以（主键没有效果）</p>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>#视图<br>/*<br>含义：虚拟表，和普通表一样使用<br>mysql5.1版本出现的新特性，是通过表动态生成的数据</p>
<p>比如：舞蹈班和普通班级的对比<br>    创建语法的关键字    是否实际占用物理空间    使用</p>
<p>视图    create view        只是保存了sql逻辑    增删改查，只是一般不能增删改</p>
<p>表    create table        保存了数据        增删改查</p>
<p>*/</p>
<p>#案例：查询姓张的学生名和专业名<br>SELECT stuname,majorname<br>FROM stuinfo s<br>INNER JOIN major m ON s.<code>majorid</code>= m.<code>id</code><br>WHERE s.<code>stuname</code> LIKE ‘张%’;</p>
<p>CREATE VIEW v1<br>AS<br>SELECT stuname,majorname<br>FROM stuinfo s<br>INNER JOIN major m ON s.<code>majorid</code>= m.<code>id</code>;</p>
<p>SELECT * FROM v1 WHERE stuname LIKE ‘张%’;</p>
<p>#一、创建视图<br>/*<br>语法：<br>create view 视图名<br>as<br>查询语句;</p>
<p>*/<br>USE myemployees;</p>
<p>#1.查询姓名中包含a字符的员工名、部门名和工种信息<br>#①创建<br>CREATE VIEW myv1<br>AS</p>
<p>SELECT last_name,department_name,job_title<br>FROM employees e<br>JOIN departments d ON e.department_id  = d.department_id<br>JOIN jobs j ON j.job_id  = e.job_id;</p>
<p>#②使用<br>SELECT * FROM myv1 WHERE last_name LIKE ‘%a%’;</p>
<p>#2.查询各部门的平均工资级别</p>
<p>#①创建视图查看每个部门的平均工资<br>CREATE VIEW myv2<br>AS<br>SELECT AVG(salary) ag,department_id<br>FROM employees<br>GROUP BY department_id;</p>
<p>#②使用<br>SELECT myv2.<code>ag</code>,g.grade_level<br>FROM myv2<br>JOIN job_grades g<br>ON myv2.<code>ag</code> BETWEEN g.<code>lowest_sal</code> AND g.<code>highest_sal</code>;</p>
<p>#3.查询平均工资最低的部门信息</p>
<p>SELECT * FROM myv2 ORDER BY ag LIMIT 1;</p>
<p>#4.查询平均工资最低的部门名和工资</p>
<p>CREATE VIEW myv3<br>AS<br>SELECT * FROM myv2 ORDER BY ag LIMIT 1;</p>
<p>SELECT d.*,m.ag<br>FROM myv3 m<br>JOIN departments d<br>ON m.<code>department_id</code>=d.<code>department_id</code>;</p>
<p>#二、视图的修改</p>
<p>#方式一：<br>/*<br>create or replace view  视图名<br>as<br>查询语句;</p>
<p>*/<br>SELECT * FROM myv3 </p>
<p>CREATE OR REPLACE VIEW myv3<br>AS<br>SELECT AVG(salary),job_id<br>FROM employees<br>GROUP BY job_id;</p>
<p>#方式二：<br>/*<br>语法：<br>alter view 视图名<br>as<br>查询语句;</p>
<p>*/<br>ALTER VIEW myv3<br>AS<br>SELECT * FROM employees;</p>
<p>#三、删除视图</p>
<p>/*</p>
<p>语法：drop view 视图名,视图名,…;<br>*/</p>
<p>DROP VIEW emp_v1,emp_v2,myv3;</p>
<p>#四、查看视图</p>
<p>DESC myv3;</p>
<p>SHOW CREATE VIEW myv3;</p>
<p>#五、视图的更新</p>
<p>CREATE OR REPLACE VIEW myv1<br>AS<br>SELECT last_name,email,salary<em>12</em>(1+IFNULL(commission_pct,0)) “annual salary”<br>FROM employees;</p>
<p>CREATE OR REPLACE VIEW myv1<br>AS<br>SELECT last_name,email<br>FROM employees;</p>
<p>SELECT * FROM myv1;<br>SELECT * FROM employees;<br>#1.插入</p>
<p>INSERT INTO myv1 VALUES(‘张飞’,‘zf@qq.com’);</p>
<p>#2.修改<br>UPDATE myv1 SET last_name = ‘张无忌’ WHERE last_name=’张飞’;</p>
<p>#3.删除<br>DELETE FROM myv1 WHERE last_name = ‘张无忌’;</p>
<p>#具备以下特点的视图不允许更新</p>
<p>#①包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all</p>
<p>CREATE OR REPLACE VIEW myv1<br>AS<br>SELECT MAX(salary) m,department_id<br>FROM employees<br>GROUP BY department_id;</p>
<p>SELECT * FROM myv1;</p>
<p>#更新<br>UPDATE myv1 SET m=9000 WHERE department_id=10;</p>
<p>#②常量视图<br>CREATE OR REPLACE VIEW myv2<br>AS</p>
<p>SELECT ‘john’ NAME;</p>
<p>SELECT * FROM myv2;</p>
<p>#更新<br>UPDATE myv2 SET NAME=’lucy’;</p>
<p>#③Select中包含子查询</p>
<p>CREATE OR REPLACE VIEW myv3<br>AS</p>
<p>SELECT department_id,(SELECT MAX(salary) FROM employees) 最高工资<br>FROM departments;</p>
<p>#更新<br>SELECT * FROM myv3;<br>UPDATE myv3 SET 最高工资=100000;</p>
<p>#④join<br>CREATE OR REPLACE VIEW myv4<br>AS</p>
<p>SELECT last_name,department_name<br>FROM employees e<br>JOIN departments d<br>ON e.department_id  = d.department_id;</p>
<p>#更新</p>
<p>SELECT * FROM myv4;<br>UPDATE myv4 SET last_name  = ‘张飞’ WHERE last_name=’Whalen’;<br>INSERT INTO myv4 VALUES(‘陈真’,’xxxx’);</p>
<p>#⑤from一个不能更新的视图<br>CREATE OR REPLACE VIEW myv5<br>AS</p>
<p>SELECT * FROM myv3;</p>
<p>#更新</p>
<p>SELECT * FROM myv5;</p>
<p>UPDATE myv5 SET 最高工资=10000 WHERE department_id=60;</p>
<p>#⑥where子句的子查询引用了from子句中的表</p>
<p>CREATE OR REPLACE VIEW myv6<br>AS</p>
<p>SELECT last_name,email,salary<br>FROM employees<br>WHERE employee_id IN(<br>    SELECT  manager_id<br>    FROM employees<br>    WHERE manager_id IS NOT NULL<br>);</p>
<p>#更新<br>SELECT * FROM myv6;<br>UPDATE myv6 SET salary=10000 WHERE last_name = ‘k_ing’;</p>
<h4 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a>例题</h4><p>#一、创建视图emp_v1,要求查询电话号码以‘011’开头的员工姓名和工资、邮箱</p>
<p>CREATE OR REPLACE VIEW emp_v1<br>AS<br>SELECT last_name,salary,email<br>FROM employees<br>WHERE phone_number LIKE ‘011%’;</p>
<p>#二、创建视图emp_v2，要求查询部门的最高工资高于12000的部门信息</p>
<p>CREATE OR REPLACE VIEW emp_v2<br>AS<br>SELECT MAX(salary) mx_dep,department_id<br>FROM employees<br>GROUP BY department_id<br>HAVING MAX(salary)&gt;12000;</p>
<p>SELECT d.*,m.mx_dep<br>FROM departments d<br>JOIN emp_v2 m<br>ON m.department_id = d.<code>department_id</code>;</p>
<h3 id="标识列"><a href="#标识列" class="headerlink" title="标识列"></a>标识列</h3><p>/*<br>又称为自增长列<br>含义：可以不用手动的插入值，系统提供默认的序列值</p>
<p>特点：<br>1、标识列必须和主键搭配吗？不一定，但要求是一个key<br>2、一个表可以有几个标识列？至多一个！<br>3、标识列的类型只能是数值型<br>4、标识列可以通过 SET auto_increment_increment=3;设置步长<br>可以通过 手动插入值，设置起始值</p>
<p>*/</p>
<p>#一、创建表时设置标识列</p>
<p>DROP TABLE IF EXISTS tab_identity;<br>CREATE TABLE tab_identity(<br>    id INT  ,<br>    NAME FLOAT UNIQUE AUTO_INCREMENT,<br>    seat INT </p>
<p>);<br>TRUNCATE TABLE tab_identity;</p>
<p>INSERT INTO tab_identity(id,NAME) VALUES(NULL,’john’);<br>INSERT INTO tab_identity(NAME) VALUES(‘lucy’);<br>SELECT * FROM tab_identity;</p>
<p>SHOW VARIABLES LIKE ‘%auto_increment%’;</p>
<p>SET auto_increment_increment=3;</p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>/*<br>系统变量：<br>    全局变量<br>    会话变量</p>
<p>自定义变量：<br>    用户变量<br>    局部变量</p>
<p><em>/<br>#一、系统变量<br>/</em><br>说明：变量由系统定义，不是用户定义，属于服务器层面<br>注意：全局变量需要添加global关键字，会话变量需要添加session关键字，如果不写，默认会话级别<br>使用步骤：<br>1、查看所有系统变量<br>show global|【session】variables;<br>2、查看满足条件的部分系统变量<br>show global|【session】 variables like ‘%char%’;<br>3、查看指定的系统变量的值<br>select @@global|【session】系统变量名;<br>4、为某个系统变量赋值<br>方式一：<br>set global|【session】系统变量名=值;<br>方式二：<br>set @@global|【session】系统变量名=值;</p>
<p><em>/<br>#1》全局变量<br>/</em><br>作用域：针对于所有会话（连接）有效，但不能跨重启<br>*/<br>#①查看所有全局变量<br>SHOW GLOBAL VARIABLES;<br>#②查看满足条件的部分系统变量<br>SHOW GLOBAL VARIABLES LIKE ‘%char%’;<br>#③查看指定的系统变量的值<br>SELECT @@global.autocommit;<br>#④为某个系统变量赋值<br>SET @@global.autocommit=0;<br>SET GLOBAL autocommit=0;</p>
<p>#2》会话变量<br>/*<br>作用域：针对于当前会话（连接）有效<br>*/<br>#①查看所有会话变量<br>SHOW SESSION VARIABLES;<br>#②查看满足条件的部分会话变量<br>SHOW SESSION VARIABLES LIKE ‘%char%’;<br>#③查看指定的会话变量的值<br>SELECT @@autocommit;<br>SELECT @@session.tx_isolation;<br>#④为某个会话变量赋值<br>SET @@session.tx_isolation=’read-uncommitted’;<br>SET SESSION tx_isolation=’read-committed’;</p>
<p>#二、自定义变量<br>/*<br>说明：变量由用户自定义，而不是系统提供的<br>使用步骤：<br>1、声明<br>2、赋值<br>3、使用（查看、比较、运算等）<br>*/</p>
<p>#1》用户变量<br>/*<br>作用域：针对于当前会话（连接）有效，作用域同于会话变量<br>*/</p>
<p>#赋值操作符：=或:=<br>#①声明并初始化<br>SET @变量名=值;<br>SET @变量名:=值;<br>SELECT @变量名:=值;</p>
<p>#②赋值（更新变量的值）<br>#方式一：<br>    SET @变量名=值;<br>    SET @变量名:=值;<br>    SELECT @变量名:=值;<br>#方式二：<br>    SELECT 字段 INTO @变量名<br>    FROM 表;<br>#③使用（查看变量的值）<br>SELECT @变量名;</p>
<p>#2》局部变量<br>/*<br>作用域：仅仅在定义它的begin end块中有效<br>应用在 begin end中的第一句话<br>*/</p>
<p>#①声明<br>DECLARE 变量名 类型;<br>DECLARE 变量名 类型 【DEFAULT 值】;</p>
<p>#②赋值（更新变量的值）</p>
<p>#方式一：<br>    SET 局部变量名=值;<br>    SET 局部变量名:=值;<br>    SELECT 局部变量名:=值;<br>#方式二：<br>    SELECT 字段 INTO 具备变量名<br>    FROM 表;<br>#③使用（查看变量的值）<br>SELECT 局部变量名;</p>
<p>#案例：声明两个变量，求和并打印</p>
<p>#用户变量<br>SET @m=1;<br>SET @n=1;<br>SET @sum=@m+@n;<br>SELECT @sum;</p>
<p>#局部变量<br>DECLARE m INT DEFAULT 1;<br>DECLARE n INT DEFAULT 1;<br>DECLARE SUM INT;<br>SET SUM=m+n;<br>SELECT SUM;</p>
<p>#用户变量和局部变量的对比</p>
<pre><code>    作用域            定义位置        语法
</code></pre>
<p>用户变量    当前会话        会话的任何地方        加@符号，不用指定类型<br>局部变量    定义它的BEGIN END中     BEGIN END的第一句话    一般不用加@,需要指定类型</p>
<p>局部变量定义 只能在 begin 和end之间 定义 否则会有语法错误</p>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>#TCL<br>/*<br>Transaction Control Language 事务控制语言</p>
<p>事务：<br>一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p>
<p>案例：转账</p>
<p>张三丰  1000<br>郭襄    1000</p>
<p>update 表 set 张三丰的余额=500 where name=’张三丰’<br>意外<br>update 表 set 郭襄的余额=1500 where name=’郭襄’</p>
<p>事务的特性：<br>ACID<br>原子性：一个事务不可再分割，要么都执行要么都不执行<br>一致性：一个事务执行会使数据从一个一致状态切换到另外一个一致状态<br>隔离性：一个事务的执行不受其他事务的干扰<br>持久性：一个事务一旦提交，则会永久的改变数据库的数据.</p>
<p>事务的创建<br>隐式事务：事务没有明显的开启和结束的标记<br>比如insert、update、delete语句</p>
<p>delete from 表 where id =1;</p>
<p>显式事务：事务具有明显的开启和结束的标记<br>前提：必须先设置自动提交功能为禁用</p>
<p>set autocommit=0;</p>
<p>步骤1：开启事务<br>set autocommit=0;<br>start transaction;可选的<br>步骤2：编写事务中的sql语句(select insert update delete)<br>语句1;<br>语句2;<br>…</p>
<p>步骤3：结束事务<br>commit;提交事务<br>rollback;回滚事务</p>
<p>savepoint 节点名;设置保存点</p>
<p>事务的隔离级别：<br>          脏读        不可重复读    幻读<br>read uncommitted：√        √        √<br>read committed：  ×        √        √<br>repeatable read： ×        ×        √<br>serializable      ×             ×               ×</p>
<p>mysql中默认 第三个隔离级别 repeatable read<br>oracle中默认第二个隔离级别 read committed<br>查看隔离级别<br>select @@tx_isolation;<br>设置隔离级别<br>set session|global transaction isolation level 隔离级别;</p>
<p>开启事务的语句;<br>update 表 set 张三丰的余额=500 where name=’张三丰’</p>
<p>update 表 set 郭襄的余额=1500 where name=’郭襄’<br>结束事务的语句;</p>
<p>*/</p>
<p>SHOW VARIABLES LIKE ‘autocommit’;<br>SHOW ENGINES;</p>
<p>#1.演示事务的使用步骤</p>
<p>#开启事务<br>SET autocommit=0;<br>START TRANSACTION;<br>#编写一组事务的语句<br>UPDATE account SET balance = 1000 WHERE username=’张无忌’;<br>UPDATE account SET balance = 1000 WHERE username=’赵敏’;</p>
<p>#结束事务<br>ROLLBACK;<br>#commit;</p>
<p>SELECT * FROM account;</p>
<p>#2.演示事务对于delete和truncate的处理的区别</p>
<p>SET autocommit=0;<br>START TRANSACTION;</p>
<p>DELETE FROM account;<br>ROLLBACK;</p>
<p>#3.演示savepoint 的使用<br>SET autocommit=0;<br>START TRANSACTION;<br>DELETE FROM account WHERE id=25;<br>SAVEPOINT a;#设置保存点<br>DELETE FROM account WHERE id=28;<br>ROLLBACK TO a;#回滚到保存点</p>
<p>SELECT * FROM account;</p>
<h3 id="存储过程和函数"><a href="#存储过程和函数" class="headerlink" title="存储过程和函数"></a>存储过程和函数</h3><p>/*<br>存储过程和函数：类似于java中的方法<br>好处：<br>1、提高代码的重用性<br>2、简化操作</p>
<p><em>/<br>#存储过程<br>/</em><br>含义：一组预先编译好的SQL语句的集合，理解成批处理语句<br>1、提高代码的重用性<br>2、简化操作<br>3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p>
<p>*/</p>
<p>#一、创建语法</p>
<p>CREATE PROCEDURE 存储过程名(参数列表)<br>BEGIN</p>
<pre><code>存储过程体（一组合法的SQL语句）
</code></pre>
<p>END</p>
<p>#注意：<br>/*<br>1、参数列表包含三部分<br>参数模式  参数名  参数类型<br>举例：<br>in stuname varchar(20)</p>
<p>参数模式：<br>in：该参数可以作为输入，也就是该参数需要调用方传入值<br>out：该参数可以作为输出，也就是该参数可以作为返回值<br>inout：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</p>
<p>2、如果存储过程体仅仅只有一句话，begin end可以省略<br>存储过程体中的每条sql语句的结尾要求必须加分号。<br>存储过程的结尾可以使用 delimiter 重新设置<br>语法：<br>delimiter 结束标记<br>案例：<br>delimiter $<br>*/</p>
<p>#二、调用语法</p>
<p>CALL 存储过程名(实参列表);</p>
<p>#——————————–案例演示———————————–<br>#1.空参列表<br>#案例：插入到admin表中五条记录</p>
<p>SELECT * FROM admin;</p>
<p>DELIMITER $<br>CREATE PROCEDURE myp1()<br>BEGIN<br>    INSERT INTO admin(username,<code>password</code>)<br>    VALUES(‘john1’,’0000’),(‘lily’,’0000’),(‘rose’,’0000’),(‘jack’,’0000’),(‘tom’,’0000’);<br>END $</p>
<p>#调用<br>CALL myp1()$</p>
<p>#2.创建带in模式参数的存储过程</p>
<p>#案例1：创建存储过程实现 根据女神名，查询对应的男神信息</p>
<p>CREATE PROCEDURE myp2(IN beautyName VARCHAR(20))<br>BEGIN<br>    SELECT bo.*<br>    FROM boys bo<br>    RIGHT JOIN beauty b ON bo.id = b.boyfriend_id<br>    WHERE b.name=beautyName;</p>
<p>END $</p>
<p>#调用<br>CALL myp2(‘柳岩’)$</p>
<p>#案例2 ：创建存储过程实现，用户是否登录成功</p>
<p>CREATE PROCEDURE myp4(IN username VARCHAR(20),IN PASSWORD VARCHAR(20))<br>BEGIN<br>    DECLARE result INT DEFAULT 0;#声明并初始化</p>
<pre><code>SELECT COUNT(*) INTO result#赋值
FROM admin
WHERE admin.username = username
AND admin.password = PASSWORD;

SELECT IF(result&gt;0,&#39;成功&#39;,&#39;失败&#39;);#使用
</code></pre>
<p>END $</p>
<p>#调用<br>CALL myp3(‘张飞’,’8888’)$</p>
<p>#3.创建out 模式参数的存储过程<br>#案例1：根据输入的女神名，返回对应的男神名<br>注意：默认是 in类型<br>CREATE PROCEDURE myp6(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20))<br>BEGIN<br>    SELECT bo.boyname INTO boyname<br>    FROM boys bo<br>    RIGHT JOIN<br>    beauty b ON b.boyfriend_id = bo.id<br>    WHERE b.name=beautyName ;</p>
<p>END $</p>
<p>#案例2：根据输入的女神名，返回对应的男神名和魅力值</p>
<p>CREATE PROCEDURE myp7(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20),OUT usercp INT)<br>BEGIN<br>    SELECT boys.boyname ,boys.usercp INTO boyname,usercp<br>    FROM boys<br>    RIGHT JOIN<br>    beauty b ON b.boyfriend_id = boys.id<br>    WHERE b.name=beautyName ;</p>
<p>END $</p>
<p>#调用<br>CALL myp7(‘小昭’,@name,@cp)$<br>SELECT @name,@cp$</p>
<p>#4.创建带inout模式参数的存储过程<br>#案例1：传入a和b两个值，最终a和b都翻倍并返回</p>
<p>CREATE PROCEDURE myp8(INOUT a INT ,INOUT b INT)<br>BEGIN<br>    SET a=a<em>2;<br>    SET b=b</em>2;<br>END $</p>
<p>#调用<br>SET @m=10$<br>SET @n=20$<br>CALL myp8(@m,@n)$<br>SELECT @m,@n$</p>
<p>#三、删除存储过程<br>#语法：drop procedure 存储过程名<br>DROP PROCEDURE p1;<br>DROP PROCEDURE p2,p3;#×</p>
<p>#四、查看存储过程的信息<br>DESC myp2;×<br>SHOW CREATE PROCEDURE  myp2;</p>
<p>#一、创建存储过程实现传入用户名和密码，插入到admin表中</p>
<p>CREATE PROCEDURE test_pro1(IN username VARCHAR(20),IN loginPwd VARCHAR(20))<br>BEGIN<br>    INSERT INTO admin(admin.username,PASSWORD)<br>    VALUES(username,loginpwd);<br>END $</p>
<p>#二、创建存储过程实现传入女神编号，返回女神名称和女神电话</p>
<p>CREATE PROCEDURE test_pro2(IN id INT,OUT NAME VARCHAR(20),OUT phone VARCHAR(20))</p>
<p>BEGIN<br>    SELECT b.name ,b.phone INTO NAME,phone<br>    FROM beauty b<br>    WHERE b.id = id;</p>
<p>END $<br>#三、创建存储存储过程或函数实现传入两个女神生日，返回大小</p>
<p>CREATE PROCEDURE test_pro3(IN birth1 DATETIME,IN birth2 DATETIME,OUT result INT)<br>BEGIN<br>    SELECT DATEDIFF(birth1,birth2) INTO result;<br>END $<br>#四、创建存储过程或函数实现传入一个日期，格式化成xx年xx月xx日并返回<br>CREATE PROCEDURE test_pro4(IN mydate DATETIME,OUT strDate VARCHAR(50))<br>BEGIN<br>    SELECT DATE_FORMAT(mydate,’%y年%m月%d日’) INTO strDate;<br>END $</p>
<p>CALL test_pro4(NOW(),@str)$<br>SELECT @str $</p>
<p>#五、创建存储过程或函数实现传入女神名称，返回：女神 and 男神  格式的字符串<br>如 传入 ：小昭<br>返回： 小昭 AND 张无忌<br>DROP PROCEDURE test_pro5 $<br>CREATE PROCEDURE test_pro5(IN beautyName VARCHAR(20),OUT str VARCHAR(50))<br>BEGIN<br>    SELECT CONCAT(beautyName,’ and ‘,IFNULL(boyName,’null’)) INTO str<br>    FROM boys bo<br>    RIGHT JOIN beauty b ON b.boyfriend_id = bo.id<br>    WHERE b.name=beautyName;</p>
<pre><code>SET str=
</code></pre>
<p>END $</p>
<p>CALL test_pro5(‘柳岩’,@str)$<br>SELECT @str $</p>
<p>#六、创建存储过程或函数，根据传入的条目数和起始索引，查询beauty表的记录<br>DROP PROCEDURE test_pro6$<br>CREATE PROCEDURE test_pro6(IN startIndex INT,IN size INT)<br>BEGIN<br>    SELECT * FROM beauty LIMIT startIndex,size;<br>END $</p>
<p>CALL test_pro6(3,5)$</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>/*<br>含义：一组预先编译好的SQL语句的集合，理解成批处理语句<br>1、提高代码的重用性<br>2、简化操作<br>3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p>
<p>区别：</p>
<p>存储过程：可以有0个返回，也可以有多个返回，适合做批量插入、批量更新<br>函数：有且仅有1 个返回，适合做处理数据后返回一个结果</p>
<p>*/</p>
<p>#一、创建语法<br>CREATE FUNCTION 函数名(参数列表) RETURNS 返回类型<br>BEGIN<br>    函数体<br>END<br>/*</p>
<p>注意：<br>1.参数列表 包含两部分：<br>参数名 参数类型</p>
<p>2.函数体：肯定会有return语句，如果没有会报错<br>如果return语句没有放在函数体的最后也不报错，但不建议</p>
<p>return 值;<br>3.函数体中仅有一句话，则可以省略begin end<br>4.使用 delimiter语句设置结束标记</p>
<p>*/</p>
<p>#二、调用语法<br>SELECT 函数名(参数列表)</p>
<p>#——————————案例演示—————————-<br>#1.无参有返回<br>#案例：返回公司的员工个数<br>CREATE FUNCTION myf1() RETURNS INT<br>BEGIN</p>
<pre><code>DECLARE c INT DEFAULT 0;#定义局部变量
SELECT COUNT(*) INTO c#赋值
FROM employees;
RETURN c;
</code></pre>
<p>END $</p>
<p>SELECT myf1()$</p>
<p>#2.有参有返回<br>#案例1：根据员工名，返回它的工资</p>
<p>CREATE FUNCTION myf2(empName VARCHAR(20)) RETURNS DOUBLE<br>BEGIN<br>    SET @sal=0;#定义用户变量<br>    SELECT salary INTO @sal   #赋值<br>    FROM employees<br>    WHERE last_name = empName;</p>
<pre><code>RETURN @sal;
</code></pre>
<p>END $</p>
<p>SELECT myf2(‘k_ing’) $</p>
<p>#案例2：根据部门名，返回该部门的平均工资</p>
<p>CREATE FUNCTION myf3(deptName VARCHAR(20)) RETURNS DOUBLE<br>BEGIN<br>    DECLARE sal DOUBLE ;<br>    SELECT AVG(salary) INTO sal<br>    FROM employees e<br>    JOIN departments d ON e.department_id = d.department_id<br>    WHERE d.department_name=deptName;<br>    RETURN sal;<br>END $</p>
<p>SELECT myf3(‘IT’)$</p>
<p>#三、查看函数</p>
<p>SHOW CREATE FUNCTION myf3;</p>
<p>#四、删除函数<br>DROP FUNCTION myf3;</p>
<p>#案例<br>#一、创建函数，实现传入两个float，返回二者之和</p>
<p>CREATE FUNCTION test_fun1(num1 FLOAT,num2 FLOAT) RETURNS FLOAT<br>BEGIN<br>    DECLARE SUM FLOAT DEFAULT 0;<br>    SET SUM=num1+num2;<br>    RETURN SUM;<br>END $</p>
<p>SELECT test_fun1(1,2)$</p>
<h3 id="流程控制结构"><a href="#流程控制结构" class="headerlink" title="流程控制结构"></a>流程控制结构</h3><p>/*<br>顺序、分支、循环</p>
<p>*/</p>
<p>#一、分支结构<br>#1.if函数<br>/*<br>语法：if(条件,值1，值2)<br>功能：实现双分支<br>应用在begin end中或外面</p>
<p>*/</p>
<p>#2.case结构<br>/*<br>语法：<br>情况1：类似于switch<br>case 变量或表达式<br>when 值1 then 语句1;<br>when 值2 then 语句2;<br>…<br>else 语句n;<br>end </p>
<p>情况2：<br>case<br>when 条件1 then 语句1;<br>when 条件2 then 语句2;<br>…<br>else 语句n;<br>end </p>
<p>应用在begin end 中或外面</p>
<p>*/</p>
<p>#3.if结构</p>
<p>/*<br>语法：<br>if 条件1 then 语句1;<br>elseif 条件2 then 语句2;<br>….<br>else 语句n;<br>end if;<br>功能：类似于多重if</p>
<p>只能应用在begin end 中</p>
<p>*/</p>
<h3 id="例题-2"><a href="#例题-2" class="headerlink" title="例题"></a>例题</h3><p>#案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p>
<p>CREATE FUNCTION test_if(score FLOAT) RETURNS CHAR<br>BEGIN<br>    DECLARE ch CHAR DEFAULT ‘A’;<br>    IF score&gt;90 THEN SET ch=’A’;<br>    ELSEIF score&gt;80 THEN SET ch=’B’;<br>    ELSEIF score&gt;60 THEN SET ch=’C’;<br>    ELSE SET ch=’D’;<br>    END IF;<br>    RETURN ch;</p>
<p>END $</p>
<p>SELECT test_if(87)$</p>
<p>#案例2：创建存储过程，如果工资&lt;2000,则删除，如果5000&gt;工资&gt;2000,则涨工资1000，否则涨工资500</p>
<p>CREATE PROCEDURE test_if_pro(IN sal DOUBLE)<br>BEGIN<br>    IF sal&lt;2000 THEN DELETE FROM employees WHERE employees.salary=sal;<br>    ELSEIF sal&gt;=2000 AND sal&lt;5000 THEN UPDATE employees SET salary=salary+1000 WHERE employees.<code>salary</code>=sal;<br>    ELSE UPDATE employees SET salary=salary+500 WHERE employees.<code>salary</code>=sal;<br>    END IF;</p>
<p>END $</p>
<p>CALL test_if_pro(2100)$</p>
<p>#案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</p>
<p>CREATE FUNCTION test_case(score FLOAT) RETURNS CHAR<br>BEGIN<br>    DECLARE ch CHAR DEFAULT ‘A’;</p>
<pre><code>CASE 
WHEN score&gt;90 THEN SET ch=&#39;A&#39;;
WHEN score&gt;80 THEN SET ch=&#39;B&#39;;
WHEN score&gt;60 THEN SET ch=&#39;C&#39;;
ELSE SET ch=&#39;D&#39;;
END CASE;

RETURN ch;
</code></pre>
<p>END $</p>
<p>SELECT test_case(56)$</p>
<p>#二、循环结构<br>/*<br>分类：<br>while、loop、repeat</p>
<p>循环控制：</p>
<p>iterate类似于 continue，继续，结束本次循环，继续下一次<br>leave 类似于  break，跳出，结束当前所在的循环</p>
<p>*/</p>
<p>#1.while<br>/*</p>
<p>语法：</p>
<p>【标签:】while 循环条件 do<br>    循环体;<br>end while【 标签】;</p>
<p>联想：</p>
<p>while(循环条件){</p>
<pre><code>循环体;
</code></pre>
<p>}</p>
<p>*/</p>
<p>#2.loop<br>/*</p>
<p>语法：<br>【标签:】loop<br>    循环体;<br>end loop 【标签】;</p>
<p>可以用来模拟简单的死循环</p>
<p>*/</p>
<p>#3.repeat<br>/*<br>语法：<br>【标签：】repeat<br>    循环体;<br>until 结束循环的条件<br>end repeat 【标签】;</p>
<p>*/</p>
<p>#1.没有添加循环控制语句<br>#案例：批量插入，根据次数插入到admin表中多条记录<br>DROP PROCEDURE pro_while1$<br>CREATE PROCEDURE pro_while1(IN insertCount INT)<br>BEGIN<br>    DECLARE i INT DEFAULT 1;<br>    WHILE i&lt;=insertCount DO<br>        INSERT INTO admin(username,<code>password</code>) VALUES(CONCAT(‘Rose’,i),’666’);<br>        SET i=i+1;<br>    END WHILE;</p>
<p>END $</p>
<p>CALL pro_while1(100)$</p>
<p>/*</p>
<p>int i=1;<br>while(i&lt;=insertcount){</p>
<pre><code>//插入

i++;
</code></pre>
<p>}</p>
<p>*/</p>
<p>#2.添加leave语句</p>
<p>#案例：批量插入，根据次数插入到admin表中多条记录，如果次数&gt;20则停止<br>TRUNCATE TABLE admin$<br>DROP PROCEDURE test_while1$<br>CREATE PROCEDURE test_while1(IN insertCount INT)<br>BEGIN<br>    DECLARE i INT DEFAULT 1;<br>    a:WHILE i&lt;=insertCount DO<br>        INSERT INTO admin(username,<code>password</code>) VALUES(CONCAT(‘xiaohua’,i),’0000’);<br>        IF i&gt;=20 THEN LEAVE a;<br>        END IF;<br>        SET i=i+1;<br>    END WHILE a;<br>END $</p>
<p>CALL test_while1(100)$</p>
<p>#3.添加iterate语句</p>
<p>#案例：批量插入，根据次数插入到admin表中多条记录，只插入偶数次<br>TRUNCATE TABLE admin$<br>DROP PROCEDURE test_while1$<br>CREATE PROCEDURE test_while1(IN insertCount INT)<br>BEGIN<br>    DECLARE i INT DEFAULT 0;<br>    a:WHILE i&lt;=insertCount DO<br>        SET i=i+1;<br>        IF MOD(i,2)!=0 THEN ITERATE a;<br>        END IF;</p>
<pre><code>    INSERT INTO admin(username,`password`) VALUES(CONCAT(&#39;xiaohua&#39;,i),&#39;0000&#39;);
    
END WHILE a;
</code></pre>
<p>END $</p>
<p>CALL test_while1(100)$</p>
<p>/*</p>
<p>int i=0;<br>while(i&lt;=insertCount){<br>    i++;<br>    if(i%2==0){<br>        continue;<br>    }<br>    插入</p>
<p>}</p>
<p>*/</p>
<p>/*一、已知表stringcontent<br>其中字段：<br>id 自增长<br>content varchar(20)</p>
<p>向该表插入指定个数的，随机的字符串<br>*/<br>DROP TABLE IF EXISTS stringcontent;<br>CREATE TABLE stringcontent(<br>    id INT PRIMARY KEY AUTO_INCREMENT,<br>    content VARCHAR(20)</p>
<p>);<br>DELIMITER $<br>CREATE PROCEDURE test_randstr_insert(IN insertCount INT)<br>BEGIN<br>    DECLARE i INT DEFAULT 1;<br>    DECLARE str VARCHAR(26) DEFAULT ‘abcdefghijklmnopqrstuvwxyz’;<br>    DECLARE startIndex INT;#代表初始索引<br>    DECLARE len INT;#代表截取的字符长度<br>    WHILE i&lt;=insertcount DO<br>        SET startIndex=FLOOR(RAND()<em>26+1);#代表初始索引，随机范围1-26<br>        SET len=FLOOR(RAND()</em>(20-startIndex+1)+1);#代表截取长度，随机范围1-（20-startIndex+1）<br>        INSERT INTO stringcontent(content) VALUES(SUBSTR(str,startIndex,len));<br>        SET i=i+1;<br>    END WHILE;</p>
<p>END $</p>
<p>CALL test_randstr_insert(10)$</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">chen-boran</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2021/04/28/Summery-of-SQL-Basic/">http://example.com/2021/04/28/Summery-of-SQL-Basic/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/thinks/">thinks</a></div><div class="post_share"><div class="social-share" data-image="https://www.hualigs.cn/image/60892a8f64b7f.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/04/28/Knolege-Point-SQL/"><img class="prev-cover" src="https://ae01.alicdn.com/kf/Uf603821b350e49a1b20485e261ac0697E.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Knolege Point SQL</div></div></a></div><div class="next-post pull-right"><a href="/2021/04/28/TCP-IP/"><img class="next-cover" src="https://ae01.alicdn.com/kf/U755d9599d2dc4c2b8b8dadb9a7d19ccf6.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">TCP@IP</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2021/04/07/First-of-my-blog/" title="First of my blog"><img class="cover" src="https://ae01.alicdn.com/kf/Ue5889eaf11594a4aabca090c5d5060798.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-07</div><div class="title">First of my blog</div></div></a></div><div><a href="/2021/04/28/SQL常见问题/" title="SQL常见问题"><img class="cover" src="https://https://ae01.alicdn.com/kf/U1a4b836d1821491aab16c78ea85ca71fH.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-28</div><div class="title">SQL常见问题</div></div></a></div><div><a href="/2021/04/28/TCP-IP/" title="TCP@IP"><img class="cover" src="https://ae01.alicdn.com/kf/U755d9599d2dc4c2b8b8dadb9a7d19ccf6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-28</div><div class="title">TCP@IP</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/favicon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">chen-boran</div><div class="author-info__description">I want to roll the sky desperately!</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">6</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/chen_boran"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%9A%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-text">1：基础查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%8D%95%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-text">1.查询表中的单个字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-text">2.查询表中的多个字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-text">3.查询表中的所有字段</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A"><span class="toc-text">方式一：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A"><span class="toc-text">方式二：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E5%B8%B8%E9%87%8F%E5%80%BC"><span class="toc-text">4.查询常量值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">5.查询表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E6%9F%A5%E8%AF%A2%E5%87%BD%E6%95%B0"><span class="toc-text">6.查询函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-text">7.起别名</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8as"><span class="toc-text">方式一：使用as</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8%E7%A9%BA%E6%A0%BC"><span class="toc-text">方式二：使用空格</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2salary%EF%BC%8C%E6%98%BE%E7%A4%BA%E7%BB%93%E6%9E%9C%E4%B8%BA-out-put"><span class="toc-text">案例：查询salary，显示结果为 out put</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E5%8E%BB%E9%87%8D"><span class="toc-text">8.去重</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E8%A1%A8%E4%B8%AD%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84%E6%89%80%E6%9C%89%E7%9A%84%E9%83%A8%E9%97%A8%E7%BC%96%E5%8F%B7"><span class="toc-text">案例：查询员工表中涉及到的所有的部门编号</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-%E5%8F%B7%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">9.+号的作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E5%A7%93%E8%BF%9E%E6%8E%A5%E6%88%90%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%B9%B6%E6%98%BE%E7%A4%BA%E4%B8%BA-%E5%A7%93%E5%90%8D"><span class="toc-text">案例：查询员工名和姓连接成一个字段，并显示为 姓名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%B8%8B%E9%9D%A2%E7%9A%84%E8%AF%AD%E5%8F%A5%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F"><span class="toc-text">2.下面的语句是否可以执行成功</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%89%BE%E5%87%BA%E4%B8%8B%E9%9D%A2%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84%E9%94%99%E8%AF%AF"><span class="toc-text">3.找出下面语句中的错误</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%98%BE%E7%A4%BA%E8%A1%A8departments%E7%9A%84%E7%BB%93%E6%9E%84%EF%BC%8C%E5%B9%B6%E6%9F%A5%E8%AF%A2%E5%85%B6%E4%B8%AD%E7%9A%84%E5%85%A8%E9%83%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">4.显示表departments的结构，并查询其中的全部数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%98%BE%E7%A4%BA%E5%87%BA%E8%A1%A8employees%E4%B8%AD%E7%9A%84%E5%85%A8%E9%83%A8job-id%EF%BC%88%E4%B8%8D%E8%83%BD%E9%87%8D%E5%A4%8D%EF%BC%89"><span class="toc-text">5.显示出表employees中的全部job_id（不能重复）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E6%98%BE%E7%A4%BA%E5%87%BA%E8%A1%A8employees%E7%9A%84%E5%85%A8%E9%83%A8%E5%88%97%EF%BC%8C%E5%90%84%E4%B8%AA%E5%88%97%E4%B9%8B%E9%97%B4%E7%94%A8%E9%80%97%E5%8F%B7%E8%BF%9E%E6%8E%A5%EF%BC%8C%E5%88%97%E5%A4%B4%E6%98%BE%E7%A4%BA%E6%88%90OUT-PUT"><span class="toc-text">6.显示出表employees的全部列，各个列之间用逗号连接，列头显示成OUT_PUT</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%9A%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">2：条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%8C%89%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AD%9B%E9%80%89"><span class="toc-text">一、按条件表达式筛选</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%B7%A5%E8%B5%84-gt-12000%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-text">案例1：查询工资&gt;12000的员工信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E6%9F%A5%E8%AF%A2%E9%83%A8%E9%97%A8%E7%BC%96%E5%8F%B7%E4%B8%8D%E7%AD%89%E4%BA%8E90%E5%8F%B7%E7%9A%84%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E9%83%A8%E9%97%A8%E7%BC%96%E5%8F%B7"><span class="toc-text">案例2：查询部门编号不等于90号的员工名和部门编号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8C%89%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AD%9B%E9%80%89"><span class="toc-text">二、按逻辑表达式筛选</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-text">三、模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-like"><span class="toc-text">1.like</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%90%8D%E4%B8%AD%E5%8C%85%E5%90%AB%E5%AD%97%E7%AC%A6a%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-text">案例1：查询员工名中包含字符a的员工信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%90%8D%E4%B8%AD%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%BAe%EF%BC%8C%E7%AC%AC%E4%BA%94%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%BAa%E7%9A%84%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E5%B7%A5%E8%B5%84"><span class="toc-text">案例2：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B3%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%90%8D%E4%B8%AD%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%BA-%E7%9A%84%E5%91%98%E5%B7%A5%E5%90%8D"><span class="toc-text">案例3：查询员工名中第二个字符为_的员工名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-between-and"><span class="toc-text">2.between and</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E7%BC%96%E5%8F%B7%E5%9C%A8100%E5%88%B0120%E4%B9%8B%E9%97%B4%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-text">案例1：查询员工编号在100到120之间的员工信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-in"><span class="toc-text">3.in</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E7%9A%84%E5%B7%A5%E7%A7%8D%E7%BC%96%E5%8F%B7%E6%98%AF-IT-PROG%E3%80%81AD-VP%E3%80%81AD-PRES%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E5%B7%A5%E7%A7%8D%E7%BC%96%E5%8F%B7"><span class="toc-text">案例：查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个员工名和工种编号</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81is-null"><span class="toc-text">4、is null</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%B2%A1%E6%9C%89%E5%A5%96%E9%87%91%E7%9A%84%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E5%A5%96%E9%87%91%E7%8E%87"><span class="toc-text">案例1：查询没有奖金的员工名和奖金率</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%9C%89%E5%A5%96%E9%87%91%E7%9A%84%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E5%A5%96%E9%87%91%E7%8E%87"><span class="toc-text">案例1：查询有奖金的员工名和奖金率</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E7%AD%89%E4%BA%8E-lt-gt"><span class="toc-text">安全等于  &lt;&#x3D;&gt;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%B2%A1%E6%9C%89%E5%A5%96%E9%87%91%E7%9A%84%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E5%A5%96%E9%87%91%E7%8E%87-1"><span class="toc-text">案例1：查询没有奖金的员工名和奖金率</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%B7%A5%E8%B5%84%E4%B8%BA12000%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-text">案例2：查询工资为12000的员工信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%98%BE%E7%A4%BA%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4-%E6%B3%A8%EF%BC%9A%E6%97%A5%E6%9C%9F-%E6%97%B6%E9%97%B4"><span class="toc-text">1.显示系统时间(注：日期+时间)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%8F%B7%EF%BC%8C%E5%A7%93%E5%90%8D%EF%BC%8C%E5%B7%A5%E8%B5%84%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%B7%A5%E8%B5%84%E6%8F%90%E9%AB%98%E7%99%BE%E5%88%86%E4%B9%8B20-%E5%90%8E%E7%9A%84%E7%BB%93%E6%9E%9C%EF%BC%88new-salary%EF%BC%89"><span class="toc-text">2.    查询员工号，姓名，工资，以及工资提高百分之20%后的结果（new salary）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%B0%86%E5%91%98%E5%B7%A5%E7%9A%84%E5%A7%93%E5%90%8D%E6%8C%89%E9%A6%96%E5%AD%97%E6%AF%8D%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%B9%B6%E5%86%99%E5%87%BA%E5%A7%93%E5%90%8D%E7%9A%84%E9%95%BF%E5%BA%A6%EF%BC%88length%EF%BC%89"><span class="toc-text">3.    将员工的姓名按首字母排序，并写出姓名的长度（length）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%81%9A%E4%B8%80%E4%B8%AA%E6%9F%A5%E8%AF%A2%EF%BC%8C%E4%BA%A7%E7%94%9F%E4%B8%8B%E9%9D%A2%E7%9A%84%E7%BB%93%E6%9E%9C"><span class="toc-text">4.    做一个查询，产生下面的结果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8case-when%EF%BC%8C%E6%8C%89%E7%85%A7%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%9D%A1%E4%BB%B6%EF%BC%9A"><span class="toc-text">5.    使用case-when，按照下面的条件：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-text">3排序查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-text">特点：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E6%8C%89%E5%8D%95%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F"><span class="toc-text">1、按单个字段排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E6%B7%BB%E5%8A%A0%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%E5%86%8D%E6%8E%92%E5%BA%8F"><span class="toc-text">2、添加筛选条件再排序</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E9%83%A8%E9%97%A8%E7%BC%96%E5%8F%B7-gt-90%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%B9%B6%E6%8C%89%E5%91%98%E5%B7%A5%E7%BC%96%E5%8F%B7%E9%99%8D%E5%BA%8F"><span class="toc-text">案例：查询部门编号&gt;&#x3D;90的员工信息，并按员工编号降序</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E6%8C%89%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8E%92%E5%BA%8F"><span class="toc-text">3、按表达式排序</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF-%E6%8C%89%E5%B9%B4%E8%96%AA%E9%99%8D%E5%BA%8F"><span class="toc-text">案例：查询员工信息 按年薪降序</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E6%8C%89%E5%88%AB%E5%90%8D%E6%8E%92%E5%BA%8F"><span class="toc-text">4、按别名排序</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF-%E6%8C%89%E5%B9%B4%E8%96%AA%E5%8D%87%E5%BA%8F"><span class="toc-text">案例：查询员工信息 按年薪升序</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81%E6%8C%89%E5%87%BD%E6%95%B0%E6%8E%92%E5%BA%8F"><span class="toc-text">5、按函数排序</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E5%90%8D%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%8C%89%E5%90%8D%E5%AD%97%E7%9A%84%E9%95%BF%E5%BA%A6%E9%99%8D%E5%BA%8F"><span class="toc-text">案例：查询员工名，并且按名字的长度降序</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81%E6%8C%89%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F"><span class="toc-text">6、按多个字段排序</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%EF%BC%8C%E8%A6%81%E6%B1%82%E5%85%88%E6%8C%89%E5%B7%A5%E8%B5%84%E9%99%8D%E5%BA%8F%EF%BC%8C%E5%86%8D%E6%8C%89employee-id%E5%8D%87%E5%BA%8F"><span class="toc-text">案例：查询员工信息，要求先按工资降序，再按employee_id升序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-2"><span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E7%9A%84%E5%A7%93%E5%90%8D%E5%92%8C%E9%83%A8%E9%97%A8%E5%8F%B7%E5%92%8C%E5%B9%B4%E8%96%AA%EF%BC%8C%E6%8C%89%E5%B9%B4%E8%96%AA%E9%99%8D%E5%BA%8F-%E6%8C%89%E5%A7%93%E5%90%8D%E5%8D%87%E5%BA%8F"><span class="toc-text">1.查询员工的姓名和部门号和年薪，按年薪降序 按姓名升序</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E9%80%89%E6%8B%A9%E5%B7%A5%E8%B5%84%E4%B8%8D%E5%9C%A88000%E5%88%B017000%E7%9A%84%E5%91%98%E5%B7%A5%E7%9A%84%E5%A7%93%E5%90%8D%E5%92%8C%E5%B7%A5%E8%B5%84%EF%BC%8C%E6%8C%89%E5%B7%A5%E8%B5%84%E9%99%8D%E5%BA%8F"><span class="toc-text">2.选择工资不在8000到17000的员工的姓名和工资，按工资降序</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E9%82%AE%E7%AE%B1%E4%B8%AD%E5%8C%85%E5%90%ABe%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%B9%B6%E5%85%88%E6%8C%89%E9%82%AE%E7%AE%B1%E7%9A%84%E5%AD%97%E8%8A%82%E6%95%B0%E9%99%8D%E5%BA%8F%EF%BC%8C%E5%86%8D%E6%8C%89%E9%83%A8%E9%97%A8%E5%8F%B7%E5%8D%87%E5%BA%8F"><span class="toc-text">3.查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%9A%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0"><span class="toc-text">4：常见函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A%E7%B1%BB%E4%BC%BC%E4%BA%8Ejava%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%B0%86%E4%B8%80%E7%BB%84%E9%80%BB%E8%BE%91%E8%AF%AD%E5%8F%A5%E5%B0%81%E8%A3%85%E5%9C%A8%E6%96%B9%E6%B3%95%E4%BD%93%E4%B8%AD%EF%BC%8C%E5%AF%B9%E5%A4%96%E6%9A%B4%E9%9C%B2%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-text">概念：类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-text">常见函数：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0"><span class="toc-text">一、字符函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-concat-%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">2.concat 拼接字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-upper%E3%80%81lower"><span class="toc-text">3.upper、lower</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%B0%86%E5%A7%93%E5%8F%98%E5%A4%A7%E5%86%99%EF%BC%8C%E5%90%8D%E5%8F%98%E5%B0%8F%E5%86%99%EF%BC%8C%E7%84%B6%E5%90%8E%E6%8B%BC%E6%8E%A5"><span class="toc-text">示例：将姓变大写，名变小写，然后拼接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-substr%E3%80%81substring"><span class="toc-text">4.substr、substring</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%88%AA%E5%8F%96%E4%BB%8E%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95%E5%A4%84%E5%90%8E%E9%9D%A2%E6%89%80%E6%9C%89%E5%AD%97%E7%AC%A6"><span class="toc-text">截取从指定索引处后面所有字符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%88%AA%E5%8F%96%E4%BB%8E%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95%E5%A4%84%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E9%95%BF%E5%BA%A6%E7%9A%84%E5%AD%97%E7%AC%A6"><span class="toc-text">截取从指定索引处指定字符长度的字符</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%A7%93%E5%90%8D%E4%B8%AD%E9%A6%96%E5%AD%97%E7%AC%A6%E5%A4%A7%E5%86%99%EF%BC%8C%E5%85%B6%E4%BB%96%E5%AD%97%E7%AC%A6%E5%B0%8F%E5%86%99%E7%84%B6%E5%90%8E%E7%94%A8-%E6%8B%BC%E6%8E%A5%EF%BC%8C%E6%98%BE%E7%A4%BA%E5%87%BA%E6%9D%A5"><span class="toc-text">案例：姓名中首字符大写，其他字符小写然后用_拼接，显示出来</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-instr-%E8%BF%94%E5%9B%9E%E5%AD%90%E4%B8%B2%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%87%BA%E7%8E%B0%E7%9A%84%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%89%BE%E4%B8%8D%E5%88%B0%E8%BF%94%E5%9B%9E0"><span class="toc-text">5.instr 返回子串第一次出现的索引，如果找不到返回0</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-trim"><span class="toc-text">6.trim</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-lpad-%E7%94%A8%E6%8C%87%E5%AE%9A%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AE%9E%E7%8E%B0%E5%B7%A6%E5%A1%AB%E5%85%85%E6%8C%87%E5%AE%9A%E9%95%BF%E5%BA%A6"><span class="toc-text">7.lpad 用指定的字符实现左填充指定长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-rpad-%E7%94%A8%E6%8C%87%E5%AE%9A%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AE%9E%E7%8E%B0%E5%8F%B3%E5%A1%AB%E5%85%85%E6%8C%87%E5%AE%9A%E9%95%BF%E5%BA%A6"><span class="toc-text">8.rpad 用指定的字符实现右填充指定长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-replace-%E6%9B%BF%E6%8D%A2"><span class="toc-text">9.replace 替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-text">二、数学函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#round-%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5"><span class="toc-text">round 四舍五入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ceil-%E5%90%91%E4%B8%8A%E5%8F%96%E6%95%B4-%E8%BF%94%E5%9B%9E-gt-%E8%AF%A5%E5%8F%82%E6%95%B0%E7%9A%84%E6%9C%80%E5%B0%8F%E6%95%B4%E6%95%B0"><span class="toc-text">ceil 向上取整,返回&gt;&#x3D;该参数的最小整数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#floor-%E5%90%91%E4%B8%8B%E5%8F%96%E6%95%B4%EF%BC%8C%E8%BF%94%E5%9B%9E-lt-%E8%AF%A5%E5%8F%82%E6%95%B0%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0"><span class="toc-text">floor 向下取整，返回&lt;&#x3D;该参数的最大整数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#truncate-%E6%88%AA%E6%96%AD"><span class="toc-text">truncate 截断</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#mod%E5%8F%96%E4%BD%99"><span class="toc-text">mod取余</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">三、日期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#now-%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%97%A5%E6%9C%9F-%E6%97%B6%E9%97%B4"><span class="toc-text">now 返回当前系统日期+时间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#curdate-%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%97%A5%E6%9C%9F%EF%BC%8C%E4%B8%8D%E5%8C%85%E5%90%AB%E6%97%B6%E9%97%B4"><span class="toc-text">curdate 返回当前系统日期，不包含时间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#curtime-%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%EF%BC%8C%E4%B8%8D%E5%8C%85%E5%90%AB%E6%97%A5%E6%9C%9F"><span class="toc-text">curtime 返回当前时间，不包含日期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E7%9A%84%E9%83%A8%E5%88%86%EF%BC%8C%E5%B9%B4%E3%80%81%E6%9C%88%E3%80%81%E6%97%A5%E3%80%81%E5%B0%8F%E6%97%B6%E3%80%81%E5%88%86%E9%92%9F%E3%80%81%E7%A7%92"><span class="toc-text">可以获取指定的部分，年、月、日、小时、分钟、秒</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#str-to-date-%E5%B0%86%E5%AD%97%E7%AC%A6%E9%80%9A%E8%BF%87%E6%8C%87%E5%AE%9A%E7%9A%84%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E6%88%90%E6%97%A5%E6%9C%9F"><span class="toc-text">str_to_date 将字符通过指定的格式转换成日期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%85%A5%E8%81%8C%E6%97%A5%E6%9C%9F%E4%B8%BA1992%E2%80%934-3%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-text">查询入职日期为1992–4-3的员工信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#date-format-%E5%B0%86%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2%E6%88%90%E5%AD%97%E7%AC%A6"><span class="toc-text">date_format 将日期转换成字符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%9C%89%E5%A5%96%E9%87%91%E7%9A%84%E5%91%98%E5%B7%A5%E5%90%8D%E5%92%8C%E5%85%A5%E8%81%8C%E6%97%A5%E6%9C%9F-xx%E6%9C%88-xx%E6%97%A5-xx%E5%B9%B4"><span class="toc-text">查询有奖金的员工名和入职日期(xx月&#x2F;xx日 xx年)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="toc-text">四、其他函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-text">五、流程控制函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-if%E5%87%BD%E6%95%B0%EF%BC%9A-if-else-%E7%9A%84%E6%95%88%E6%9E%9C"><span class="toc-text">1.if函数： if else 的效果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-case%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%80%EF%BC%9A-switch-case-%E7%9A%84%E6%95%88%E6%9E%9C"><span class="toc-text">2.case函数的使用一： switch case 的效果</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E7%9A%84%E5%B7%A5%E8%B5%84%EF%BC%8C%E8%A6%81%E6%B1%82"><span class="toc-text">案例：查询员工的工资，要求</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-case-%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8%E4%BA%8C%EF%BC%9A%E7%B1%BB%E4%BC%BC%E4%BA%8E-%E5%A4%9A%E9%87%8Dif"><span class="toc-text">3.case 函数的使用二：类似于 多重if</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E7%9A%84%E5%B7%A5%E8%B5%84%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-text">案例：查询员工的工资的情况</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%9A%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-text">5：分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A-1"><span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A-1"><span class="toc-text">特点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E9%83%A8%E9%97%A8%E7%9A%84%E5%91%98%E5%B7%A5%E4%B8%AA%E6%95%B0"><span class="toc-text">引入：查询每个部门的员工个数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%86%E7%BB%84"><span class="toc-text">1.简单的分组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E5%B7%A5%E7%A7%8D%E7%9A%84%E5%91%98%E5%B7%A5%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84"><span class="toc-text">案例1：查询每个工种的员工平均工资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E4%BD%8D%E7%BD%AE%E7%9A%84%E9%83%A8%E9%97%A8%E4%B8%AA%E6%95%B0"><span class="toc-text">案例2：查询每个位置的部门个数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E5%88%86%E7%BB%84%E5%89%8D%E7%9A%84%E7%AD%9B%E9%80%89"><span class="toc-text">2、可以实现分组前的筛选</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%9F%A5%E8%AF%A2%E9%82%AE%E7%AE%B1%E4%B8%AD%E5%8C%85%E5%90%ABa%E5%AD%97%E7%AC%A6%E7%9A%84-%E6%AF%8F%E4%B8%AA%E9%83%A8%E9%97%A8%E7%9A%84%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84"><span class="toc-text">案例1：查询邮箱中包含a字符的 每个部门的最高工资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%9C%89%E5%A5%96%E9%87%91%E7%9A%84%E6%AF%8F%E4%B8%AA%E9%A2%86%E5%AF%BC%E6%89%8B%E4%B8%8B%E5%91%98%E5%B7%A5%E7%9A%84%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84"><span class="toc-text">案例2：查询有奖金的每个领导手下员工的平均工资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%88%86%E7%BB%84%E5%90%8E%E7%AD%9B%E9%80%89"><span class="toc-text">3、分组后筛选</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E9%83%A8%E9%97%A8%E7%9A%84%E5%91%98%E5%B7%A5%E4%B8%AA%E6%95%B0"><span class="toc-text">①查询每个部门的员工个数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-%E7%AD%9B%E9%80%89%E5%88%9A%E6%89%8D%E2%91%A0%E7%BB%93%E6%9E%9C"><span class="toc-text">② 筛选刚才①结果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E6%AF%8F%E4%B8%AA%E5%B7%A5%E7%A7%8D%E6%9C%89%E5%A5%96%E9%87%91%E7%9A%84%E5%91%98%E5%B7%A5%E7%9A%84%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84-gt-12000%E7%9A%84%E5%B7%A5%E7%A7%8D%E7%BC%96%E5%8F%B7%E5%92%8C%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84"><span class="toc-text">案例2：每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B3%EF%BC%9A%E9%A2%86%E5%AF%BC%E7%BC%96%E5%8F%B7-gt-102%E7%9A%84%E6%AF%8F%E4%B8%AA%E9%A2%86%E5%AF%BC%E6%89%8B%E4%B8%8B%E7%9A%84%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%E5%A4%A7%E4%BA%8E5000%E7%9A%84%E9%A2%86%E5%AF%BC%E7%BC%96%E5%8F%B7%E5%92%8C%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84"><span class="toc-text">案例3：领导编号&gt;102的每个领导手下的最低工资大于5000的领导编号和最低工资</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%B7%BB%E5%8A%A0%E6%8E%92%E5%BA%8F"><span class="toc-text">4.添加排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%AF%8F%E4%B8%AA%E5%B7%A5%E7%A7%8D%E6%9C%89%E5%A5%96%E9%87%91%E7%9A%84%E5%91%98%E5%B7%A5%E7%9A%84%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84-gt-6000%E7%9A%84%E5%B7%A5%E7%A7%8D%E7%BC%96%E5%8F%B7%E5%92%8C%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84-%E6%8C%89%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84%E5%8D%87%E5%BA%8F"><span class="toc-text">案例：每个工种有奖金的员工的最高工资&gt;6000的工种编号和最高工资,按最高工资升序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%8C%89%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%88%86%E7%BB%84"><span class="toc-text">5.按多个字段分组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E5%B7%A5%E7%A7%8D%E6%AF%8F%E4%B8%AA%E9%83%A8%E9%97%A8%E7%9A%84%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84-%E5%B9%B6%E6%8C%89%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%E9%99%8D%E5%BA%8F"><span class="toc-text">案例：查询每个工种每个部门的最低工资,并按最低工资降序</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-3"><span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%90%84job-id%E7%9A%84%E5%91%98%E5%B7%A5%E5%B7%A5%E8%B5%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%80%BC%EF%BC%8C%E5%B9%B3%E5%9D%87%E5%80%BC%EF%BC%8C%E6%80%BB%E5%92%8C%EF%BC%8C%E5%B9%B6%E6%8C%89job-id%E5%8D%87%E5%BA%8F"><span class="toc-text">1.查询各job_id的员工工资的最大值，最小值，平均值，总和，并按job_id升序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84%E5%92%8C%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%E7%9A%84%E5%B7%AE%E8%B7%9D%EF%BC%88DIFFERENCE%EF%BC%89"><span class="toc-text">2.查询员工最高工资和最低工资的差距（DIFFERENCE）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AA%E7%AE%A1%E7%90%86%E8%80%85%E6%89%8B%E4%B8%8B%E5%91%98%E5%B7%A5%E7%9A%84%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%EF%BC%8C%E5%85%B6%E4%B8%AD%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%E4%B8%8D%E8%83%BD%E4%BD%8E%E4%BA%8E6000%EF%BC%8C%E6%B2%A1%E6%9C%89%E7%AE%A1%E7%90%86%E8%80%85%E7%9A%84%E5%91%98%E5%B7%A5%E4%B8%8D%E8%AE%A1%E7%AE%97%E5%9C%A8%E5%86%85"><span class="toc-text">3.查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E9%83%A8%E9%97%A8%E7%9A%84%E7%BC%96%E5%8F%B7%EF%BC%8C%E5%91%98%E5%B7%A5%E6%95%B0%E9%87%8F%E5%92%8C%E5%B7%A5%E8%B5%84%E5%B9%B3%E5%9D%87%E5%80%BC-%E5%B9%B6%E6%8C%89%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E9%99%8D%E5%BA%8F"><span class="toc-text">4.查询所有部门的编号，员工数量和工资平均值,并按平均工资降序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E9%80%89%E6%8B%A9%E5%85%B7%E6%9C%89%E5%90%84%E4%B8%AAjob-id%E7%9A%84%E5%91%98%E5%B7%A5%E4%BA%BA%E6%95%B0"><span class="toc-text">5.选择具有各个job_id的员工人数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-text">二、分组函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A%E7%94%A8%E4%BD%9C%E7%BB%9F%E8%AE%A1%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%8F%88%E7%A7%B0%E4%B8%BA%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E6%88%96%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0%E6%88%96%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-text">功能：用作统计使用，又称为聚合函数或统计函数或组函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-text">分类：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A-2"><span class="toc-text">特点：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E7%AE%80%E5%8D%95-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">1、简单 的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%8F%82%E6%95%B0%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B"><span class="toc-text">2、参数支持哪些类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E6%98%AF%E5%90%A6%E5%BF%BD%E7%95%A5null"><span class="toc-text">3、是否忽略null</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%92%8Cdistinct%E6%90%AD%E9%85%8D"><span class="toc-text">4、和distinct搭配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81count%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D"><span class="toc-text">5、count函数的详细介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%88%E7%8E%87%EF%BC%9A"><span class="toc-text">效率：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81%E5%92%8C%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0%E4%B8%80%E5%90%8C%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%AD%97%E6%AE%B5%E6%9C%89%E9%99%90%E5%88%B6"><span class="toc-text">6、和分组函数一同查询的字段有限制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-4"><span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%85%AC%E5%8F%B8%E5%91%98%E5%B7%A5%E5%B7%A5%E8%B5%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%80%BC%EF%BC%8C%E5%B9%B3%E5%9D%87%E5%80%BC%EF%BC%8C%E6%80%BB%E5%92%8C"><span class="toc-text">1.查询公司员工工资的最大值，最小值，平均值，总和</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E5%91%98%E5%B7%A5%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%9C%80%E5%A4%A7%E5%85%A5%E8%81%8C%E6%97%B6%E9%97%B4%E5%92%8C%E6%9C%80%E5%B0%8F%E5%85%A5%E8%81%8C%E6%97%B6%E9%97%B4%E7%9A%84%E7%9B%B8%E5%B7%AE%E5%A4%A9%E6%95%B0-%EF%BC%88DIFFRENCE%EF%BC%89"><span class="toc-text">#2.查询员工表中的最大入职时间和最小入职时间的相差天数 （DIFFRENCE）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E9%83%A8%E9%97%A8%E7%BC%96%E5%8F%B7%E4%B8%BA90%E7%9A%84%E5%91%98%E5%B7%A5%E4%B8%AA%E6%95%B0"><span class="toc-text">3.查询部门编号为90的员工个数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%9A%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">6：连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E6%9F%A5%E8%AF%A2%E6%A1%88%E4%BE%8B"><span class="toc-text">外查询案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2-sql99%E8%AF%AD%E6%B3%95"><span class="toc-text">连接查询  sql99语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-5"><span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2-%E2%98%85"><span class="toc-text">分页查询 ★</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">子查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL"><span class="toc-text">DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%93%E5%92%8C%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-text">库和表的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-6"><span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-text">联合查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML%E8%AF%AD%E8%A8%80"><span class="toc-text">DML语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-7"><span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">常见的数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A1%88%E4%BE%8B"><span class="toc-text">子查询案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%B7%A5%E8%B5%84%E6%9C%80%E4%BD%8E%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF-last-name-salary"><span class="toc-text">1. 查询工资最低的员工信息: last_name, salary</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E6%9C%80%E4%BD%8E%E7%9A%84%E9%83%A8%E9%97%A8%E4%BF%A1%E6%81%AF"><span class="toc-text">2. 查询平均工资最低的部门信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E6%9C%80%E4%BD%8E%E7%9A%84%E9%83%A8%E9%97%A8%E4%BF%A1%E6%81%AF%E5%92%8C%E8%AF%A5%E9%83%A8%E9%97%A8%E7%9A%84%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84"><span class="toc-text">3. 查询平均工资最低的部门信息和该部门的平均工资</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E6%9C%80%E9%AB%98%E7%9A%84-job-%E4%BF%A1%E6%81%AF"><span class="toc-text">4. 查询平均工资最高的 job 信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E9%AB%98%E4%BA%8E%E5%85%AC%E5%8F%B8%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E7%9A%84%E9%83%A8%E9%97%A8%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-text">5. 查询平均工资高于公司平均工资的部门有哪些?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%9F%A5%E8%AF%A2%E5%87%BA%E5%85%AC%E5%8F%B8%E4%B8%AD%E6%89%80%E6%9C%89-manager-%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-text">6. 查询出公司中所有 manager 的详细信息.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%90%84%E4%B8%AA%E9%83%A8%E9%97%A8%E4%B8%AD-%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84%E4%B8%AD%E6%9C%80%E4%BD%8E%E7%9A%84%E9%82%A3%E4%B8%AA%E9%83%A8%E9%97%A8%E7%9A%84-%E6%9C%80%E4%BD%8E%E5%B7%A5%E8%B5%84%E6%98%AF%E5%A4%9A%E5%B0%91"><span class="toc-text">7. 各个部门中 最高工资中最低的那个部门的 最低工资是多少</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E6%9F%A5%E8%AF%A2%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84%E6%9C%80%E9%AB%98%E7%9A%84%E9%83%A8%E9%97%A8%E7%9A%84-manager-%E7%9A%84%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF-last-name-department-id-email-salary"><span class="toc-text">8. 查询平均工资最高的部门的 manager 的详细信息: last_name, department_id, email, salary</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98"><span class="toc-text">例题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98-1"><span class="toc-text">例题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E8%AF%86%E5%88%97"><span class="toc-text">标识列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-text">变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-text">事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-text">存储过程和函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="toc-text">流程控制结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98-2"><span class="toc-text">例题</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/04/28/SQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="SQL常见问题"><img src="https://https://ae01.alicdn.com/kf/U1a4b836d1821491aab16c78ea85ca71fH.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL常见问题"/></a><div class="content"><a class="title" href="/2021/04/28/SQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="SQL常见问题">SQL常见问题</a><time datetime="2021-04-28T09:16:53.000Z" title="Created 2021-04-28 17:16:53">2021-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/28/Knolege-Point-SQL/" title="Knolege Point SQL"><img src="https://ae01.alicdn.com/kf/Uf603821b350e49a1b20485e261ac0697E.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Knolege Point SQL"/></a><div class="content"><a class="title" href="/2021/04/28/Knolege-Point-SQL/" title="Knolege Point SQL">Knolege Point SQL</a><time datetime="2021-04-28T09:14:52.000Z" title="Created 2021-04-28 17:14:52">2021-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/28/Summery-of-SQL-Basic/" title="Summery of SQL Basic"><img src="https://www.hualigs.cn/image/60892a8f64b7f.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Summery of SQL Basic"/></a><div class="content"><a class="title" href="/2021/04/28/Summery-of-SQL-Basic/" title="Summery of SQL Basic">Summery of SQL Basic</a><time datetime="2021-04-28T09:05:48.000Z" title="Created 2021-04-28 17:05:48">2021-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/28/TCP-IP/" title="TCP@IP"><img src="https://ae01.alicdn.com/kf/U755d9599d2dc4c2b8b8dadb9a7d19ccf6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TCP@IP"/></a><div class="content"><a class="title" href="/2021/04/28/TCP-IP/" title="TCP@IP">TCP@IP</a><time datetime="2021-04-28T08:56:27.000Z" title="Created 2021-04-28 16:56:27">2021-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/22/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/" title="MySQL必知必会"><img src="https://ae01.alicdn.com/kf/U374fe6fc0e744ebd9e46512db340f6cf5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL必知必会"/></a><div class="content"><a class="title" href="/2021/04/22/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/" title="MySQL必知必会">MySQL必知必会</a><time datetime="2021-04-22T15:49:22.000Z" title="Created 2021-04-22 23:49:22">2021-04-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By chen-boran</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>