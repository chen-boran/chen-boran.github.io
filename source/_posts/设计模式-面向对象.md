---
title: 设计模式-面向对象
date: 2022-03-02 16:19:59
tags: 
- ["设计模式"]
categories: 
- [Notes]
keywords:
description: some of my thinks
top_img: 
comments: 
cover: https://ae01.alicdn.com/kf/Ue5889eaf11594a4aabca090c5d5060798.jpg
toc:  
toc_number:
copyright:
mathjax:
katex:
---

为了保证知识的全面性，在此讨论面向对象的设计思想，为之后的设计模式做铺垫。



### 一、面向对象

首先耳熟能详的面向对象的四大特性：封装、继承、抽象、多态。

**面向对象编程和面向对象编程语言？**

面向对象的两个重要概念：类和对象。

- 面向对象编程可以理解成以面向对象四大特性为代码设计基础，以类和对象作为代码基本组织单元的一种编程范式。
- 面向对象编程语言：狭义上来说是实现面向对象特性，并且支持类和对象为主体的语法机制的编程语言。

**面向对象分析和面向对象设计？**

简单点讲，面向对象分析就是要搞清楚做什么，面向对象设计就是要搞清楚怎么做。两个阶

段最终的产出是类的设计，包括程序被拆解为哪些类，每个类有哪些属性方法、类与类之间如何交互等。

### 二、面向对象四大特性

下面详细分析以下面向对象四大特性

**1. 关于封装特性**

封装也叫作信息隐藏或者数据访问保护。类通过暴露有限的访问接口，授权外部仅能通过类

提供的方式来访问内部信息或者数据。它需要编程语言提供权限访问控制语法来支持，例如

Java 中的 private、protected、public 关键字。封装特性存在的意义，一方面是保护数据

不被随意修改，提高代码的可维护性；另一方面是仅暴露有限的必要接口，提高类的易用

性。

**2. 关于抽象特性**

封装主要讲如何隐藏信息、保护数据，那抽象就是讲如何隐藏方法的具体实现，让使用者只

需要关心方法提供了哪些功能，不需要知道这些功能是如何实现的。抽象可以通过接口类或

者抽象类来实现，但也并不需要特殊的语法机制来支持。抽象存在的意义，一方面是提高代

码的可扩展性、维护性，修改实现不需要改变定义，减少代码的改动范围；另一方面，它也

是处理复杂系统的有效手段，能有效地过滤掉不必要关注的信息。

**3. 关于继承特性**继承是用来表示类之间的 is-a 关系，分为两种模式：单继承和多继承。单继承表示一个子

类只继承一个父类，多继承表示一个子类可以继承多个父类。为了实现继承这个特性，编程

语言需要提供特殊的语法机制来支持。继承主要是用来解决代码复用的问题。

**4. 关于多态特性**

多态是指子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。多态这种特

性也需要编程语言提供特殊的语法机制来实现，比如继承、接口类、duck-typing。多态可

以提高代码的扩展性和复用性，是很多设计模式、设计原则、编程技巧的代码实现基础。

### 三、**面向对象编程相比面向过程编程有什么优点？**

面向过程编程适用于简单程序开发，程序流程有一条主线，分步骤顺序执行，对于简单的执行流程的程序来说比较适合。

面向对象编程是用于大规模程序开发，对于整体程序流程错综复杂。以类为思考对象。经过面向对象设计，将需求翻译成类。建立类之间的相互关系，最终组装成程序。

面向对象的设计模式提供了更清晰、模块化的代码组织方式。

面向对象编程的代码更易复用、易于维护和复用。（面向对象编程，具有更丰富的特性）

###  四、接口和抽象类的区别？

java即支持抽象类也支持接口。

1、抽象类

​	抽象类不能被实例化，只能被继承。

​	抽象类中可以包含属性和方法，方法可以包含抽象方法（无代码具体实现）和非抽象方法。

​	子类继承抽象类，必须实现抽象类中的所有**抽象**方法。

抽象类是一种特殊的不能被实例化类，。



2、接口 

​	接口不能包含属性（成员变量）

​	接口只能还包含抽象方法（无具体实现 ）

​	实现类实现接口时，必须实现接口中的所有方法。

3、抽象类和接口的应用场景区别**

如果要表示一种is-a 的关系，并且是为了解决代码复用问题，我们就用抽象类；如果要表示 has-a关系，并且解决抽象而不是代码复用的问题，那么就可以使用接口。

### 五、基于接口编程？

一个和接口有关的原则：基于接口编程而非实现编程。

​	从本质上来说，接口可以理解成一组“协议”，“约定”，上述原则可以表述成：基于抽象编程而非实现编程：抽象是提高代码可扩展性、灵活行性、可维护性的有效手段之一

 定义接口要注意：

1、函数的命名不能暴露任何实现细节。 

2、 封装具体的实现细节。 

3、为实现类定义抽象的接口。具体的实现类都依赖统一的接口定义，遵从一致的上传功能

### 六、多用组合少用继承

有这么一条设计原则：组合优于继承

 

**1. 为什么不推荐使用继承？**

继承是面向对象的四大特性之一，用来表示类之间的 is-a 关系，可以解决代码复用的问题。虽然继承有诸多作用，但继承层次过深、过复杂，也会影响到代码的可维护性。在这种情况下，我们应该尽量少用，甚至不用继承。



**2. 组合相比继承有哪些优势？**

继承主要有三个作用：表示 is-a 关系，支持多态特性，代码复用。而这三个作用都可以通过组合、接口、委托三个技术手段来达成。除此之外，利用组合还能解决层次过深、过复杂的继承关系影响代码可维护性的问题。



**3. 如何判断该用组合还是继承？**

 组合也并不是完美的，继承也并非一无是处。在实际的项目开发中，我们还是要根据具体的情况，来选择该用继承还是组合。如果类之间的继承结构稳定，层次比较浅，关系不复杂，我们就可以大胆地使用继承。反之，我们就尽量使用组合来替代继承。除此之外，还有一些设计模式、特殊的应用场景，会固定使用继承或者组合。



### 七、**贫血模型** **VS** **充血模型**  

我们平时做 Web 项目的业务开发，大部分都是基于贫血模型的 MVC 三层架构， 相对于新兴的基于充血模型的

DDD 开发模式来说的。基于贫血模型的传统开发模式，是典型的面向过程的编程风格。相反，基于充血模型的 DDD 开发模式，是典型的面向对象的编程风格。

不过，DDD 也并非银弹。对于业务不复杂的系统开发来说，基于贫血模型的传统开发模式简单够用，基于充血模型的 DDD 开发模式有点大材小用，无法发挥作用。相反，对于业务复杂的系统开发来说，基于充血模型的 DDD 开发模式，因为前期需要在设计上投入更多时间和精力，来提高代码的复用性和可维护性，所以相比基于贫血模型的开发模式，更加有优势。

基于充血模型的 DDD 开发模式跟基于贫血模型的传统开发模式相比，主要区别在 Service层。在基于充血模型的开发模式下，我们将部分原来在 Service 类中的业务逻辑移动到了一个充血的 Domain 领域模型中，让 Service 类的实现依赖这个 Domain 类。不过，Service 类并不会完全移除，而是负责一些不适合放在 Domain 类中的功能。比如，负责与 Repository 层打交道、跨领域模型的业务聚合功能、幂等事务等非功能性的工作。基于充血模型的 DDD 开发模式跟基于贫血模型的传统开发模式相比，Controller 层和Repository 层的代码基本上相同。这是因为，Repository 层的 Entity 生命周期有限，Controller 层的 VO 只是单纯作为一种 DTO。两部分的业务逻辑都不会太复杂。业务逻辑主要集中在 Service 层。所以，Repository 层和 Controller 层继续沿用贫血模型的设计思路是没有问题的。

